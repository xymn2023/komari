import{r as c,R as y,c as tt,j as i,d as at,e as va,f as Ye,g as Yt,h as ba,i as xa,k as wa,P as Tn,l as ya,T as Ca,m as Da,n as Ea,a as Sa}from"./entry-index-Cq13IMyc.js";import{N as Ra,u as St,P as ja}from"./chunk-NodeDetailsContext-Bc0mLyEG.js";import{t as Ie}from"./chunk-index-CSMgxAiP.js";import{P as Ta,F as Na,a as zn,T as dr}from"./chunk-Node-BXTfQ3ZC.js";import{T as Oa,a as Aa,b as fr,c as Ue,d as Ma,e as We}from"./chunk-table-BS5X1aPI.js";import{u as hr}from"./chunk-use-mobile-BDllwLRx.js";import{u as Ia,a as sn,h as ka,R as Pa,b as La}from"./chunk-require-react-element-DaU34sMa.js";import{c as pr}from"./chunk-index-l6qGRyk6.js";import{c as ot}from"./chunk-utils-bRKmu4jq.js";import{S as _a}from"./chunk-SettingCard-CsyIFvca.js";import{u as Le,p as vt}from"./chunk-useTranslation-DT6f2-nl.js";import{P as $a}from"./chunk-plus-yY1l5HUY.js";import{c as Ce,C as Fa,u as Ba,g as za,v as Ge}from"./chunk-select-SplvZF8F.js";import{o as ke}from"./chunk-button-BTrNb_zO.js";import{s as Rt,n as rt,p as jt,g as Tt,m as Ua}from"./chunk-dialog-ChtOFG_l.js";import{p as X}from"./chunk-flex-D_qeScnl.js";import{o as Pe}from"./chunk-icon-button-8RHoNX6f.js";import{p as Wa,l as Un}from"./chunk-segmented-control-C3cF3Z3E.js";import{r as xn}from"./chunk-text-area-76rX6ii9.js";import{u as de,c as Ha}from"./chunk-text-field-BPsisRj1.js";import{c as Nt}from"./chunk-createLucideIcon-SgBSd_zz.js";import{T as Va}from"./chunk-trash-2-JV4RX0Pv.js";import"./chunk-react-vendor-Csw2ODfV.js";import"./chunk-proxy-BKiT5fFT.js";import"./chunk-box-BWWdO3eg.js";import"./chunk-badge-C4fUOBFU.js";import"./chunk-throttle-CmHaeH0s.js";import"./chunk-card--UUq0CNs.js";import"./chunk-switch-CttJqP-B.js";import"./chunk-index-CMdh1AKP.js";import"./chunk-dropdown-menu-C_QY9m_V.js";import"./chunk-icons-Czmt910x.js";import"./chunk-index-FhuETDEf.js";import"./chunk-index-SkULk3VY.js";import"./chunk-chevron-down-BtBCajUJ.js";import"./chunk-index-BlzzkOYo.js";import"./chunk-internal-BM6wX41l.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],Xa=Nt("circle-dollar-sign",Ya);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],yt=Nt("copy",qa);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ga=Nt("download",Ka);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Qa=Nt("menu",Ja);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],eo=Nt("terminal",Za);function to(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const Qt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function it(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Nn(e){return"nodeType"in e}function fe(e){var t,n;return e?it(e)?e:Nn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function On(e){const{Document:t}=fe(e);return e instanceof t}function Ot(e){return it(e)?!1:e instanceof fe(e).HTMLElement}function gr(e){return e instanceof fe(e).SVGElement}function st(e){return e?it(e)?e.document:Nn(e)?On(e)?e:Ot(e)||gr(e)?e.ownerDocument:document:document:document}const je=Qt?c.useLayoutEffect:c.useEffect;function An(e){const t=c.useRef(e);return je(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function no(){const e=c.useRef(null),t=c.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ct(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return je(()=>{n.current!==e&&(n.current=e)},t),n}function At(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Xt(e){const t=An(e),n=c.useRef(null),r=c.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function wn(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let ln={};function Mt(e,t){return c.useMemo(()=>{if(t)return t;const n=ln[e]==null?0:ln[e]+1;return ln[e]=n,e+"-"+n},[e,t])}function mr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((o,l)=>{const s=Object.entries(l);for(const[u,d]of s){const f=o[u];f!=null&&(o[u]=f+e*d)}return o},{...t})}}const nt=mr(1),qt=mr(-1);function ro(e){return"clientX"in e&&"clientY"in e}function Mn(e){if(!e)return!1;const{KeyboardEvent:t}=fe(e.target);return t&&e instanceof t}function ao(e){if(!e)return!1;const{TouchEvent:t}=fe(e.target);return t&&e instanceof t}function yn(e){if(ao(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return ro(e)?{x:e.clientX,y:e.clientY}:null}const Dt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Dt.Translate.toString(e),Dt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Wn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function oo(e){return e.matches(Wn)?e:e.querySelector(Wn)}const io={display:"none"};function so(e){let{id:t,value:n}=e;return y.createElement("div",{id:t,style:io},n)}function lo(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return y.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function co(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const vr=c.createContext(null);function uo(e){const t=c.useContext(vr);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function fo(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:a,event:o}=r;e.forEach(l=>{var s;return(s=l[a])==null?void 0:s.call(l,o)})},[e]),t]}const ho={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},po={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function go(e){let{announcements:t=po,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=ho}=e;const{announce:o,announcement:l}=co(),s=Mt("DndLiveRegion"),[u,d]=c.useState(!1);if(c.useEffect(()=>{d(!0)},[]),uo(c.useMemo(()=>({onDragStart(h){let{active:m}=h;o(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:x}=h;t.onDragMove&&o(t.onDragMove({active:m,over:x}))},onDragOver(h){let{active:m,over:x}=h;o(t.onDragOver({active:m,over:x}))},onDragEnd(h){let{active:m,over:x}=h;o(t.onDragEnd({active:m,over:x}))},onDragCancel(h){let{active:m,over:x}=h;o(t.onDragCancel({active:m,over:x}))}}),[o,t])),!u)return null;const f=y.createElement(y.Fragment,null,y.createElement(so,{id:r,value:a.draggable}),y.createElement(lo,{id:s,announcement:l}));return n?tt.createPortal(f,n):f}var Z;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Z||(Z={}));function Kt(){}function cn(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function mo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const De=Object.freeze({x:0,y:0});function vo(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function bo(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function xo(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function wo(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Hn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const yo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Hn(t,t.left,t.top),o=[];for(const l of r){const{id:s}=l,u=n.get(s);if(u){const d=vo(Hn(u),a);o.push({id:s,data:{droppableContainer:l,value:d}})}}return o.sort(bo)};function Co(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=a-r,s=o-n;if(r<a&&n<o){const u=t.width*t.height,d=e.width*e.height,f=l*s,h=f/(u+d-f);return Number(h.toFixed(4))}return 0}const Do=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const o of r){const{id:l}=o,s=n.get(l);if(s){const u=Co(s,t);u>0&&a.push({id:l,data:{droppableContainer:o,value:u}})}}return a.sort(xo)};function Eo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function br(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:De}function So(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a.reduce((l,s)=>({...l,top:l.top+e*s.y,bottom:l.bottom+e*s.y,left:l.left+e*s.x,right:l.right+e*s.x}),{...n})}}const Ro=So(1);function jo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function To(e,t,n){const r=jo(t);if(!r)return e;const{scaleX:a,scaleY:o,x:l,y:s}=r,u=e.left-l-(1-a)*parseFloat(n),d=e.top-s-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,h=o?e.height/o:e.height;return{width:f,height:h,top:d,right:u+f,bottom:d+h,left:u}}const No={ignoreTransform:!1};function lt(e,t){t===void 0&&(t=No);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:f}=fe(e).getComputedStyle(e);d&&(n=To(n,d,f))}const{top:r,left:a,width:o,height:l,bottom:s,right:u}=n;return{top:r,left:a,width:o,height:l,bottom:s,right:u}}function Vn(e){return lt(e,{ignoreTransform:!0})}function Oo(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Ao(e,t){return t===void 0&&(t=fe(e).getComputedStyle(e)),t.position==="fixed"}function Mo(e,t){t===void 0&&(t=fe(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?n.test(o):!1})}function In(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(On(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Ot(a)||gr(a)||n.includes(a))return n;const o=fe(e).getComputedStyle(a);return a!==e&&Mo(a,o)&&n.push(a),Ao(a,o)?n:r(a.parentNode)}return e?r(e):n}function xr(e){const[t]=In(e,1);return t??null}function un(e){return!Qt||!e?null:it(e)?e:Nn(e)?On(e)||e===st(e).scrollingElement?window:Ot(e)?e:null:null}function wr(e){return it(e)?e.scrollX:e.scrollLeft}function yr(e){return it(e)?e.scrollY:e.scrollTop}function Cn(e){return{x:wr(e),y:yr(e)}}var ne;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ne||(ne={}));function Cr(e){return!Qt||!e?!1:e===document.scrollingElement}function Dr(e){const t={x:0,y:0},n=Cr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,s=e.scrollLeft>=r.x;return{isTop:a,isLeft:o,isBottom:l,isRight:s,maxScroll:r,minScroll:t}}const Io={x:.2,y:.2};function ko(e,t,n,r,a){let{top:o,left:l,right:s,bottom:u}=n;r===void 0&&(r=10),a===void 0&&(a=Io);const{isTop:d,isBottom:f,isLeft:h,isRight:m}=Dr(e),x={x:0,y:0},S={x:0,y:0},g={height:t.height*a.y,width:t.width*a.x};return!d&&o<=t.top+g.height?(x.y=ne.Backward,S.y=r*Math.abs((t.top+g.height-o)/g.height)):!f&&u>=t.bottom-g.height&&(x.y=ne.Forward,S.y=r*Math.abs((t.bottom-g.height-u)/g.height)),!m&&s>=t.right-g.width?(x.x=ne.Forward,S.x=r*Math.abs((t.right-g.width-s)/g.width)):!h&&l<=t.left+g.width&&(x.x=ne.Backward,S.x=r*Math.abs((t.left+g.width-l)/g.width)),{direction:x,speed:S}}function Po(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Er(e){return e.reduce((t,n)=>nt(t,Cn(n)),De)}function Lo(e){return e.reduce((t,n)=>t+wr(n),0)}function _o(e){return e.reduce((t,n)=>t+yr(n),0)}function $o(e,t){if(t===void 0&&(t=lt),!e)return;const{top:n,left:r,bottom:a,right:o}=t(e);xr(e)&&(a<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Fo=[["x",["left","right"],Lo],["y",["top","bottom"],_o]];class kn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=In(n),a=Er(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,s]of Fo)for(const u of l)Object.defineProperty(this,u,{get:()=>{const d=s(r),f=a[o]-d;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Bo(e){const{EventTarget:t}=fe(e);return e instanceof t?e:st(e)}function dn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var xe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(xe||(xe={}));function Yn(e){e.preventDefault()}function zo(e){e.stopPropagation()}var $;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})($||($={}));const Sr={start:[$.Space,$.Enter],cancel:[$.Esc],end:[$.Space,$.Enter,$.Tab]},Uo=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case $.Right:return{...n,x:n.x+25};case $.Left:return{...n,x:n.x-25};case $.Down:return{...n,y:n.y+25};case $.Up:return{...n,y:n.y-25}}};class Pn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new bt(st(n)),this.windowListeners=new bt(fe(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xe.Resize,this.handleCancel),this.windowListeners.add(xe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&$o(r),n(De)}handleKeyDown(t){if(Mn(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:o=Sr,coordinateGetter:l=Uo,scrollBehavior:s="smooth"}=a,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,f=d?{x:d.left,y:d.top}:De;this.referenceCoordinates||(this.referenceCoordinates=f);const h=l(t,{active:n,context:r.current,currentCoordinates:f});if(h){const m=qt(h,f),x={x:0,y:0},{scrollableAncestors:S}=r.current;for(const g of S){const D=t.code,{isTop:v,isRight:p,isLeft:w,isBottom:b,maxScroll:T,minScroll:M}=Dr(g),C=Po(g),E={x:Math.min(D===$.Right?C.right-C.width/2:C.right,Math.max(D===$.Right?C.left:C.left+C.width/2,h.x)),y:Math.min(D===$.Down?C.bottom-C.height/2:C.bottom,Math.max(D===$.Down?C.top:C.top+C.height/2,h.y))},j=D===$.Right&&!p||D===$.Left&&!w,k=D===$.Down&&!b||D===$.Up&&!v;if(j&&E.x!==h.x){const I=g.scrollLeft+m.x,H=D===$.Right&&I<=T.x||D===$.Left&&I>=M.x;if(H&&!m.y){g.scrollTo({left:I,behavior:s});return}H?x.x=g.scrollLeft-I:x.x=D===$.Right?g.scrollLeft-T.x:g.scrollLeft-M.x,x.x&&g.scrollBy({left:-x.x,behavior:s});break}else if(k&&E.y!==h.y){const I=g.scrollTop+m.y,H=D===$.Down&&I<=T.y||D===$.Up&&I>=M.y;if(H&&!m.x){g.scrollTo({top:I,behavior:s});return}H?x.y=g.scrollTop-I:x.y=D===$.Down?g.scrollTop-T.y:g.scrollTop-M.y,x.y&&g.scrollBy({top:-x.y,behavior:s});break}}this.handleMove(t,nt(qt(h,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Pn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Sr,onActivation:a}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const s=o.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Xn(e){return!!(e&&"distance"in e)}function qn(e){return!!(e&&"delay"in e)}class Ln{constructor(t,n,r){var a;r===void 0&&(r=Bo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=st(l),this.documentListeners=new bt(this.document),this.listeners=new bt(r),this.windowListeners=new bt(fe(l)),this.initialCoordinates=(a=yn(o))!=null?a:De,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(xe.Resize,this.handleCancel),this.windowListeners.add(xe.DragStart,Yn),this.windowListeners.add(xe.VisibilityChange,this.handleCancel),this.windowListeners.add(xe.ContextMenu,Yn),this.documentListeners.add(xe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Xn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(xe.Click,zo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:o}=this,{onMove:l,options:{activationConstraint:s}}=o;if(!a)return;const u=(n=yn(t))!=null?n:De,d=qt(a,u);if(!r&&s){if(Xn(s)){if(s.tolerance!=null&&dn(d,s.tolerance))return this.handleCancel();if(dn(d,s.distance))return this.handleStart()}if(qn(s)&&dn(d,s.tolerance))return this.handleCancel();this.handlePending(s,d);return}t.cancelable&&t.preventDefault(),l(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===$.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Wo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Rr extends Ln{constructor(t){const{event:n}=t,r=st(n.target);super(t,Wo,r)}}Rr.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Ho={move:{name:"mousemove"},end:{name:"mouseup"}};var Dn;(function(e){e[e.RightClick=2]="RightClick"})(Dn||(Dn={}));class jr extends Ln{constructor(t){super(t,Ho,st(t.event.target))}}jr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Dn.RightClick?!1:(r==null||r({event:n}),!0)}}];const fn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Tr extends Ln{constructor(t){super(t,fn)}static setup(){return window.addEventListener(fn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(fn.move.name,t)};function t(){}}}Tr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var xt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(xt||(xt={}));var Gt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gt||(Gt={}));function Vo(e){let{acceleration:t,activator:n=xt.Pointer,canScroll:r,draggingRect:a,enabled:o,interval:l=5,order:s=Gt.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:f,delta:h,threshold:m}=e;const x=Xo({delta:h,disabled:!o}),[S,g]=no(),D=c.useRef({x:0,y:0}),v=c.useRef({x:0,y:0}),p=c.useMemo(()=>{switch(n){case xt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case xt.DraggableRect:return a}},[n,a,u]),w=c.useRef(null),b=c.useCallback(()=>{const M=w.current;if(!M)return;const C=D.current.x*v.current.x,E=D.current.y*v.current.y;M.scrollBy(C,E)},[]),T=c.useMemo(()=>s===Gt.TreeOrder?[...d].reverse():d,[s,d]);c.useEffect(()=>{if(!o||!d.length||!p){g();return}for(const M of T){if((r==null?void 0:r(M))===!1)continue;const C=d.indexOf(M),E=f[C];if(!E)continue;const{direction:j,speed:k}=ko(M,E,p,t,m);for(const I of["x","y"])x[I][j[I]]||(k[I]=0,j[I]=0);if(k.x>0||k.y>0){g(),w.current=M,S(b,l),D.current=k,v.current=j;return}}D.current={x:0,y:0},v.current={x:0,y:0},g()},[t,b,r,g,o,l,JSON.stringify(p),JSON.stringify(x),S,d,T,f,JSON.stringify(m)])}const Yo={x:{[ne.Backward]:!1,[ne.Forward]:!1},y:{[ne.Backward]:!1,[ne.Forward]:!1}};function Xo(e){let{delta:t,disabled:n}=e;const r=wn(t);return At(a=>{if(n||!r||!a)return Yo;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ne.Backward]:a.x[ne.Backward]||o.x===-1,[ne.Forward]:a.x[ne.Forward]||o.x===1},y:{[ne.Backward]:a.y[ne.Backward]||o.y===-1,[ne.Forward]:a.y[ne.Forward]||o.y===1}}},[n,t,r])}function qo(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return At(a=>{var o;return t==null?null:(o=r??a)!=null?o:null},[r,t])}function Ko(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,o=a.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var Et;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Et||(Et={}));var En;(function(e){e.Optimized="optimized"})(En||(En={}));const Kn=new Map;function Go(e,t){let{dragging:n,dependencies:r,config:a}=t;const[o,l]=c.useState(null),{frequency:s,measure:u,strategy:d}=a,f=c.useRef(e),h=D(),m=Ct(h),x=c.useCallback(function(v){v===void 0&&(v=[]),!m.current&&l(p=>p===null?v:p.concat(v.filter(w=>!p.includes(w))))},[m]),S=c.useRef(null),g=At(v=>{if(h&&!n)return Kn;if(!v||v===Kn||f.current!==e||o!=null){const p=new Map;for(let w of e){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){p.set(w.id,w.rect.current);continue}const b=w.node.current,T=b?new kn(u(b),b):null;w.rect.current=T,T&&p.set(w.id,T)}return p}return v},[e,o,n,h,u]);return c.useEffect(()=>{f.current=e},[e]),c.useEffect(()=>{h||x()},[n,h]),c.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),c.useEffect(()=>{h||typeof s!="number"||S.current!==null||(S.current=setTimeout(()=>{x(),S.current=null},s))},[s,h,x,...r]),{droppableRects:g,measureDroppableContainers:x,measuringScheduled:o!=null};function D(){switch(d){case Et.Always:return!1;case Et.BeforeDragging:return n;default:return!n}}}function Nr(e,t){return At(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Jo(e,t){return Nr(e,t)}function Qo(e){let{callback:t,disabled:n}=e;const r=An(t),a=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return c.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Zt(e){let{callback:t,disabled:n}=e;const r=An(t),a=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return c.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Zo(e){return new kn(lt(e),e)}function Gn(e,t,n){t===void 0&&(t=Zo);const[r,a]=c.useState(null);function o(){a(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const l=Qo({callback(u){if(e)for(const d of u){const{type:f,target:h}=d;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){o();break}}}}),s=Zt({callback:o});return je(()=>{o(),e?(s==null||s.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),l==null||l.disconnect())},[e]),r}function ei(e){const t=Nr(e);return br(e,t)}const Jn=[];function ti(e){const t=c.useRef(e),n=At(r=>e?r&&r!==Jn&&e&&t.current&&e.parentNode===t.current.parentNode?r:In(e):Jn,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function ni(e){const[t,n]=c.useState(null),r=c.useRef(e),a=c.useCallback(o=>{const l=un(o.target);l&&n(s=>s?(s.set(l,Cn(l)),new Map(s)):null)},[]);return c.useEffect(()=>{const o=r.current;if(e!==o){l(o);const s=e.map(u=>{const d=un(u);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,Cn(d)]):null}).filter(u=>u!=null);n(s.length?new Map(s):null),r.current=e}return()=>{l(e),l(o)};function l(s){s.forEach(u=>{const d=un(u);d==null||d.removeEventListener("scroll",a)})}},[a,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>nt(o,l),De):Er(e):De,[e,t])}function Qn(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==De;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?qt(e,n.current):De}function ri(e){c.useEffect(()=>{if(!Qt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function ai(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:o}=r;return n[a]=l=>{o(l,t)},n},{}),[e,t])}function Or(e){return c.useMemo(()=>e?Oo(e):null,[e])}const Zn=[];function oi(e,t){t===void 0&&(t=lt);const[n]=e,r=Or(n?fe(n):null),[a,o]=c.useState(Zn);function l(){o(()=>e.length?e.map(u=>Cr(u)?r:new kn(t(u),u)):Zn)}const s=Zt({callback:l});return je(()=>{s==null||s.disconnect(),l(),e.forEach(u=>s==null?void 0:s.observe(u))},[e]),a}function ii(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ot(t)?t:e}function si(e){let{measure:t}=e;const[n,r]=c.useState(null),a=c.useCallback(d=>{for(const{target:f}of d)if(Ot(f)){r(h=>{const m=t(f);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),o=Zt({callback:a}),l=c.useCallback(d=>{const f=ii(d);o==null||o.disconnect(),f&&(o==null||o.observe(f)),r(f?t(f):null)},[t,o]),[s,u]=Xt(l);return c.useMemo(()=>({nodeRef:s,rect:n,setRef:u}),[n,s,u])}const li=[{sensor:Rr,options:{}},{sensor:Pn,options:{}}],ci={current:{}},Vt={draggable:{measure:Vn},droppable:{measure:Vn,strategy:Et.WhileDragging,frequency:En.Optimized},dragOverlay:{measure:lt}};class wt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const ui={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Kt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Vt,measureDroppableContainers:Kt,windowRect:null,measuringScheduled:!1},di={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Kt,draggableNodes:new Map,over:null,measureDroppableContainers:Kt},en=c.createContext(di),Ar=c.createContext(ui);function fi(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wt}}}function hi(e,t){switch(t.type){case Z.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Z.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Z.DragEnd:case Z.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Z.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new wt(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case Z.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new wt(e.droppable.containers);return l.set(n,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:l}}}case Z.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const o=new wt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function pi(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=c.useContext(en),o=wn(r),l=wn(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!Mn(o)||document.activeElement===o.target)return;const s=a.get(l);if(!s)return;const{activatorNode:u,node:d}=s;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[u.current,d.current]){if(!f)continue;const h=oo(f);if(h){h.focus();break}}})}},[r,t,a,l,o]),null}function gi(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...r}),n):n}function mi(e){return c.useMemo(()=>({draggable:{...Vt.draggable,...e==null?void 0:e.draggable},droppable:{...Vt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Vt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function vi(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const o=c.useRef(!1),{x:l,y:s}=typeof a=="boolean"?{x:a,y:a}:a;je(()=>{if(!l&&!s||!t){o.current=!1;return}if(o.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const f=n(d),h=br(f,r);if(l||(h.x=0),s||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=xr(d);m&&m.scrollBy({top:h.y,left:h.x})}},[t,l,s,r,n])}const Mr=c.createContext({...De,scaleX:1,scaleY:1});var Ve;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ve||(Ve={}));const bi=c.memo(function(t){var n,r,a,o;let{id:l,accessibility:s,autoScroll:u=!0,children:d,sensors:f=li,collisionDetection:h=Do,measuring:m,modifiers:x,...S}=t;const g=c.useReducer(hi,void 0,fi),[D,v]=g,[p,w]=fo(),[b,T]=c.useState(Ve.Uninitialized),M=b===Ve.Initialized,{draggable:{active:C,nodes:E,translate:j},droppable:{containers:k}}=D,I=C!=null?E.get(C):null,H=c.useRef({initial:null,translated:null}),R=c.useMemo(()=>{var A;return C!=null?{id:C,data:(A=I==null?void 0:I.data)!=null?A:ci,rect:H}:null},[C,I]),V=c.useRef(null),[K,re]=c.useState(null),[F,ce]=c.useState(null),ee=Ct(S,Object.values(S)),we=Mt("DndDescribedBy",l),Qe=c.useMemo(()=>k.getEnabled(),[k]),ae=mi(m),{droppableRects:oe,measureDroppableContainers:ve,measuringScheduled:Te}=Go(Qe,{dragging:M,dependencies:[j.x,j.y],config:ae.droppable}),ie=qo(E,C),Se=c.useMemo(()=>F?yn(F):null,[F]),ue=B(),he=Jo(ie,ae.draggable.measure);vi({activeNode:C!=null?E.get(C):null,config:ue.layoutShiftCompensation,initialRect:he,measure:ae.draggable.measure});const L=Gn(ie,ae.draggable.measure,he),be=Gn(ie?ie.parentElement:null),pe=c.useRef({activatorEvent:null,active:null,activeNode:ie,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=k.getNodeFor((n=pe.current.over)==null?void 0:n.id),N=si({measure:ae.dragOverlay.measure}),Oe=(r=N.nodeRef.current)!=null?r:ie,Ae=M?(a=N.rect)!=null?a:L:null,Ze=!!(N.nodeRef.current&&N.rect),kt=ei(Ze?null:L),ct=Or(Oe?fe(Oe):null),se=ti(M?Ne??ie:null),qe=oi(se),et=gi(x,{transform:{x:j.x-kt.x,y:j.y-kt.y,scaleX:1,scaleY:1},activatorEvent:F,active:R,activeNodeRect:L,containerNodeRect:be,draggingNodeRect:Ae,over:pe.current.over,overlayNodeRect:N.rect,scrollableAncestors:se,scrollableAncestorRects:qe,windowRect:ct}),$e=Se?nt(Se,j):null,Pt=ni(se),Lt=Qn(Pt),nn=Qn(Pt,[L]),Fe=nt(et,Lt),ye=Ae?Ro(Ae,et):null,Ke=R&&ye?h({active:R,collisionRect:ye,droppableRects:oe,droppableContainers:Qe,pointerCoordinates:$e}):null,ut=wo(Ke,"id"),[Re,Be]=c.useState(null),_t=Ze?et:nt(et,nn),rn=Eo(_t,(o=Re==null?void 0:Re.rect)!=null?o:null,L),dt=c.useRef(null),$t=c.useCallback((A,P)=>{let{sensor:z,options:Y}=P;if(V.current==null)return;const G=E.get(V.current);if(!G)return;const W=A.nativeEvent,te=new z({active:V.current,activeNode:G,event:W,options:Y,context:pe,onAbort(U){if(!E.get(U))return;const{onDragAbort:me}=ee.current,Me={id:U};me==null||me(Me),p({type:"onDragAbort",event:Me})},onPending(U,ge,me,Me){if(!E.get(U))return;const{onDragPending:ht}=ee.current,ze={id:U,constraint:ge,initialCoordinates:me,offset:Me};ht==null||ht(ze),p({type:"onDragPending",event:ze})},onStart(U){const ge=V.current;if(ge==null)return;const me=E.get(ge);if(!me)return;const{onDragStart:Me}=ee.current,ft={activatorEvent:W,active:{id:ge,data:me.data,rect:H}};tt.unstable_batchedUpdates(()=>{Me==null||Me(ft),T(Ve.Initializing),v({type:Z.DragStart,initialCoordinates:U,active:ge}),p({type:"onDragStart",event:ft}),re(dt.current),ce(W)})},onMove(U){v({type:Z.DragMove,coordinates:U})},onEnd:le(Z.DragEnd),onCancel:le(Z.DragCancel)});dt.current=te;function le(U){return async function(){const{active:me,collisions:Me,over:ft,scrollAdjustedTranslate:ht}=pe.current;let ze=null;if(me&&ht){const{cancelDrop:pt}=ee.current;ze={activatorEvent:W,active:me,collisions:Me,delta:ht,over:ft},U===Z.DragEnd&&typeof pt=="function"&&await Promise.resolve(pt(ze))&&(U=Z.DragCancel)}V.current=null,tt.unstable_batchedUpdates(()=>{v({type:U}),T(Ve.Uninitialized),Be(null),re(null),ce(null),dt.current=null;const pt=U===Z.DragEnd?"onDragEnd":"onDragCancel";if(ze){const on=ee.current[pt];on==null||on(ze),p({type:pt,event:ze})}})}}},[E]),an=c.useCallback((A,P)=>(z,Y)=>{const G=z.nativeEvent,W=E.get(Y);if(V.current!==null||!W||G.dndKit||G.defaultPrevented)return;const te={active:W};A(z,P.options,te)===!0&&(G.dndKit={capturedBy:P.sensor},V.current=Y,$t(z,P))},[E,$t]),Ft=Ko(f,an);ri(f),je(()=>{L&&b===Ve.Initializing&&T(Ve.Initialized)},[L,b]),c.useEffect(()=>{const{onDragMove:A}=ee.current,{active:P,activatorEvent:z,collisions:Y,over:G}=pe.current;if(!P||!z)return;const W={active:P,activatorEvent:z,collisions:Y,delta:{x:Fe.x,y:Fe.y},over:G};tt.unstable_batchedUpdates(()=>{A==null||A(W),p({type:"onDragMove",event:W})})},[Fe.x,Fe.y]),c.useEffect(()=>{const{active:A,activatorEvent:P,collisions:z,droppableContainers:Y,scrollAdjustedTranslate:G}=pe.current;if(!A||V.current==null||!P||!G)return;const{onDragOver:W}=ee.current,te=Y.get(ut),le=te&&te.rect.current?{id:te.id,rect:te.rect.current,data:te.data,disabled:te.disabled}:null,U={active:A,activatorEvent:P,collisions:z,delta:{x:G.x,y:G.y},over:le};tt.unstable_batchedUpdates(()=>{Be(le),W==null||W(U),p({type:"onDragOver",event:U})})},[ut]),je(()=>{pe.current={activatorEvent:F,active:R,activeNode:ie,collisionRect:ye,collisions:Ke,droppableRects:oe,draggableNodes:E,draggingNode:Oe,draggingNodeRect:Ae,droppableContainers:k,over:Re,scrollableAncestors:se,scrollAdjustedTranslate:Fe},H.current={initial:Ae,translated:ye}},[R,ie,Ke,ye,E,Oe,Ae,oe,k,Re,se,Fe]),Vo({...ue,delta:j,draggingRect:ye,pointerCoordinates:$e,scrollableAncestors:se,scrollableAncestorRects:qe});const O=c.useMemo(()=>({active:R,activeNode:ie,activeNodeRect:L,activatorEvent:F,collisions:Ke,containerNodeRect:be,dragOverlay:N,draggableNodes:E,droppableContainers:k,droppableRects:oe,over:Re,measureDroppableContainers:ve,scrollableAncestors:se,scrollableAncestorRects:qe,measuringConfiguration:ae,measuringScheduled:Te,windowRect:ct}),[R,ie,L,F,Ke,be,N,E,k,oe,Re,ve,se,qe,ae,Te,ct]),_=c.useMemo(()=>({activatorEvent:F,activators:Ft,active:R,activeNodeRect:L,ariaDescribedById:{draggable:we},dispatch:v,draggableNodes:E,over:Re,measureDroppableContainers:ve}),[F,Ft,R,L,v,we,E,Re,ve]);return y.createElement(vr.Provider,{value:w},y.createElement(en.Provider,{value:_},y.createElement(Ar.Provider,{value:O},y.createElement(Mr.Provider,{value:rn},d)),y.createElement(pi,{disabled:(s==null?void 0:s.restoreFocus)===!1})),y.createElement(go,{...s,hiddenTextDescribedById:we}));function B(){const A=(K==null?void 0:K.autoScrollEnabled)===!1,P=typeof u=="object"?u.enabled===!1:u===!1,z=M&&!A&&!P;return typeof u=="object"?{...u,enabled:z}:{enabled:z}}}),xi=c.createContext(null),er="button",wi="Draggable";function yi(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const o=Mt(wi),{activators:l,activatorEvent:s,active:u,activeNodeRect:d,ariaDescribedById:f,draggableNodes:h,over:m}=c.useContext(en),{role:x=er,roleDescription:S="draggable",tabIndex:g=0}=a??{},D=(u==null?void 0:u.id)===t,v=c.useContext(D?Mr:xi),[p,w]=Xt(),[b,T]=Xt(),M=ai(l,t),C=Ct(n);je(()=>(h.set(t,{id:t,key:o,node:p,activatorNode:b,data:C}),()=>{const j=h.get(t);j&&j.key===o&&h.delete(t)}),[h,t]);const E=c.useMemo(()=>({role:x,tabIndex:g,"aria-disabled":r,"aria-pressed":D&&x===er?!0:void 0,"aria-roledescription":S,"aria-describedby":f.draggable}),[r,x,g,D,S,f.draggable]);return{active:u,activatorEvent:s,activeNodeRect:d,attributes:E,isDragging:D,listeners:r?void 0:M,node:p,over:m,setNodeRef:w,setActivatorNodeRef:T,transform:v}}function Ci(){return c.useContext(Ar)}const Di="Droppable",Ei={timeout:25};function Si(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const o=Mt(Di),{active:l,dispatch:s,over:u,measureDroppableContainers:d}=c.useContext(en),f=c.useRef({disabled:n}),h=c.useRef(!1),m=c.useRef(null),x=c.useRef(null),{disabled:S,updateMeasurementsFor:g,timeout:D}={...Ei,...a},v=Ct(g??r),p=c.useCallback(()=>{if(!h.current){h.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(v.current)?v.current:[v.current]),x.current=null},D)},[D]),w=Zt({callback:p,disabled:S||!l}),b=c.useCallback((E,j)=>{w&&(j&&(w.unobserve(j),h.current=!1),E&&w.observe(E))},[w]),[T,M]=Xt(b),C=Ct(t);return c.useEffect(()=>{!w||!T.current||(w.disconnect(),h.current=!1,w.observe(T.current))},[T,w]),c.useEffect(()=>(s({type:Z.RegisterDroppable,element:{id:r,key:o,disabled:n,node:T,rect:m,data:C}}),()=>s({type:Z.UnregisterDroppable,key:o,id:r})),[r]),c.useEffect(()=>{n!==f.current.disabled&&(s({type:Z.SetDroppableDisabled,id:r,key:o,disabled:n}),f.current.disabled=n)},[r,o,n,s]),{active:l,rect:m,isOver:(u==null?void 0:u.id)===r,node:T,over:u,setNodeRef:M}}function Ir(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Ri(e,t){return e.reduce((n,r,a)=>{const o=t.get(r);return o&&(n[a]=o),n},Array(e.length))}function Bt(e){return e!==null&&e>=0}function ji(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ti(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const kr=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const o=Ir(t,r,n),l=t[a],s=o[a];return!s||!l?null:{x:s.left-l.left,y:s.top-l.top,scaleX:s.width/l.width,scaleY:s.height/l.height}},zt={scaleX:1,scaleY:1},Ni=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:o,overIndex:l}=e;const s=(t=o[n])!=null?t:r;if(!s)return null;if(a===n){const d=o[l];return d?{x:0,y:n<l?d.top+d.height-(s.top+s.height):d.top-s.top,...zt}:null}const u=Oi(o,a,n);return a>n&&a<=l?{x:0,y:-s.height-u,...zt}:a<n&&a>=l?{x:0,y:s.height+u,...zt}:{x:0,y:0,...zt}};function Oi(e,t,n){const r=e[t],a=e[t-1],o=e[t+1];return r?n<t?a?r.top-(a.top+a.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const Pr="Sortable",Lr=y.createContext({activeIndex:-1,containerId:Pr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:kr,disabled:{draggable:!1,droppable:!1}});function Ai(e){let{children:t,id:n,items:r,strategy:a=kr,disabled:o=!1}=e;const{active:l,dragOverlay:s,droppableRects:u,over:d,measureDroppableContainers:f}=Ci(),h=Mt(Pr,n),m=s.rect!==null,x=c.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),S=l!=null,g=l?x.indexOf(l.id):-1,D=d?x.indexOf(d.id):-1,v=c.useRef(x),p=!ji(x,v.current),w=D!==-1&&g===-1||p,b=Ti(o);je(()=>{p&&S&&f(x)},[p,x,S,f]),c.useEffect(()=>{v.current=x},[x]);const T=c.useMemo(()=>({activeIndex:g,containerId:h,disabled:b,disableTransforms:w,items:x,overIndex:D,useDragOverlay:m,sortedRects:Ri(x,u),strategy:a}),[g,h,b.draggable,b.droppable,w,x,D,u,m,a]);return y.createElement(Lr.Provider,{value:T},t)}const Mi=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return Ir(n,r,a).indexOf(t)},Ii=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:o,newIndex:l,previousItems:s,previousContainerId:u,transition:d}=e;return!d||!r||s!==o&&a===l?!1:n?!0:l!==a&&t===u},ki={duration:200,easing:"ease"},_r="transform",Pi=Dt.Transition.toString({property:_r,duration:0,easing:"linear"}),Li={roleDescription:"sortable"};function _i(e){let{disabled:t,index:n,node:r,rect:a}=e;const[o,l]=c.useState(null),s=c.useRef(n);return je(()=>{if(!t&&n!==s.current&&r.current){const u=a.current;if(u){const d=lt(r.current,{ignoreTransform:!0}),f={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(f.x||f.y)&&l(f)}}n!==s.current&&(s.current=n)},[t,n,r,a]),c.useEffect(()=>{o&&l(null)},[o]),o}function $i(e){let{animateLayoutChanges:t=Ii,attributes:n,disabled:r,data:a,getNewIndex:o=Mi,id:l,strategy:s,resizeObserverConfig:u,transition:d=ki}=e;const{items:f,containerId:h,activeIndex:m,disabled:x,disableTransforms:S,sortedRects:g,overIndex:D,useDragOverlay:v,strategy:p}=c.useContext(Lr),w=Fi(r,x),b=f.indexOf(l),T=c.useMemo(()=>({sortable:{containerId:h,index:b,items:f},...a}),[h,a,b,f]),M=c.useMemo(()=>f.slice(f.indexOf(l)),[f,l]),{rect:C,node:E,isOver:j,setNodeRef:k}=Si({id:l,data:T,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...u}}),{active:I,activatorEvent:H,activeNodeRect:R,attributes:V,setNodeRef:K,listeners:re,isDragging:F,over:ce,setActivatorNodeRef:ee,transform:we}=yi({id:l,data:T,attributes:{...Li,...n},disabled:w.draggable}),Qe=to(k,K),ae=!!I,oe=ae&&!S&&Bt(m)&&Bt(D),ve=!v&&F,Te=ve&&oe?we:null,Se=oe?Te??(s??p)({rects:g,activeNodeRect:R,activeIndex:m,overIndex:D,index:b}):null,ue=Bt(m)&&Bt(D)?o({id:l,items:f,activeIndex:m,overIndex:D}):b,he=I==null?void 0:I.id,L=c.useRef({activeId:he,items:f,newIndex:ue,containerId:h}),be=f!==L.current.items,pe=t({active:I,containerId:h,isDragging:F,isSorting:ae,id:l,index:b,items:f,newIndex:L.current.newIndex,previousItems:L.current.items,previousContainerId:L.current.containerId,transition:d,wasDragging:L.current.activeId!=null}),Ne=_i({disabled:!pe,index:b,node:E,rect:C});return c.useEffect(()=>{ae&&L.current.newIndex!==ue&&(L.current.newIndex=ue),h!==L.current.containerId&&(L.current.containerId=h),f!==L.current.items&&(L.current.items=f)},[ae,ue,h,f]),c.useEffect(()=>{if(he===L.current.activeId)return;if(he!=null&&L.current.activeId==null){L.current.activeId=he;return}const Oe=setTimeout(()=>{L.current.activeId=he},50);return()=>clearTimeout(Oe)},[he]),{active:I,activeIndex:m,attributes:V,data:T,rect:C,index:b,newIndex:ue,items:f,isOver:j,isSorting:ae,isDragging:F,listeners:re,node:E,overIndex:D,over:ce,setNodeRef:Qe,setActivatorNodeRef:ee,setDroppableNodeRef:k,setDraggableNodeRef:K,transform:Ne??Se,transition:N()};function N(){if(Ne||be&&L.current.newIndex===b)return Pi;if(!(ve&&!Mn(H)||!d)&&(ae||pe))return Dt.Transition.toString({...d,property:_r})}}function Fi(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}$.Down,$.Right,$.Up,$.Left;var Bi=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_e=Bi.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=c.forwardRef((a,o)=>{const{asChild:l,...s}=a,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...s,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function zi(e,t){e&&tt.flushSync(()=>e.dispatchEvent(t))}var Ui="DismissableLayer",Sn="dismissableLayer.update",Wi="dismissableLayer.pointerDownOutside",Hi="dismissableLayer.focusOutside",tr,$r=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fr=c.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:s,...u}=e,d=c.useContext($r),[f,h]=c.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=c.useState({}),S=at(t,C=>h(C)),g=Array.from(d.layers),[D]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(D),p=f?g.indexOf(f):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,b=p>=v,T=Xi(C=>{const E=C.target,j=[...d.branches].some(k=>k.contains(E));!b||j||(a==null||a(C),l==null||l(C),C.defaultPrevented||s==null||s())},m),M=qi(C=>{const E=C.target;[...d.branches].some(k=>k.contains(E))||(o==null||o(C),l==null||l(C),C.defaultPrevented||s==null||s())},m);return va(C=>{p===d.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&s&&(C.preventDefault(),s()))},m),c.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(tr=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),nr(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=tr)}},[f,m,n,d]),c.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),nr())},[f,d]),c.useEffect(()=>{const C=()=>x({});return document.addEventListener(Sn,C),()=>document.removeEventListener(Sn,C)},[]),i.jsx(_e.div,{...u,ref:S,style:{pointerEvents:w?b?"auto":"none":void 0,...e.style},onFocusCapture:Ye(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Ye(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ye(e.onPointerDownCapture,T.onPointerDownCapture)})});Fr.displayName=Ui;var Vi="DismissableLayerBranch",Yi=c.forwardRef((e,t)=>{const n=c.useContext($r),r=c.useRef(null),a=at(t,r);return c.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(_e.div,{...e,ref:a})});Yi.displayName=Vi;function Xi(e,t=globalThis==null?void 0:globalThis.document){const n=Yt(e),r=c.useRef(!1),a=c.useRef(()=>{});return c.useEffect(()=>{const o=s=>{if(s.target&&!r.current){let u=function(){Br(Wi,n,d,{discrete:!0})};const d={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function qi(e,t=globalThis==null?void 0:globalThis.document){const n=Yt(e),r=c.useRef(!1);return c.useEffect(()=>{const a=o=>{o.target&&!r.current&&Br(Hi,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nr(){const e=new CustomEvent(Sn);document.dispatchEvent(e)}function Br(e,t,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?zi(a,o):a.dispatchEvent(o)}var hn="focusScope.autoFocusOnMount",pn="focusScope.autoFocusOnUnmount",rr={bubbles:!1,cancelable:!0},Ki="FocusScope",zr=c.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=e,[s,u]=c.useState(null),d=Yt(a),f=Yt(o),h=c.useRef(null),m=at(t,g=>u(g)),x=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(r){let g=function(w){if(x.paused||!s)return;const b=w.target;s.contains(b)?h.current=b:He(h.current,{select:!0})},D=function(w){if(x.paused||!s)return;const b=w.relatedTarget;b!==null&&(s.contains(b)||He(h.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const T of w)T.removedNodes.length>0&&He(s)};document.addEventListener("focusin",g),document.addEventListener("focusout",D);const p=new MutationObserver(v);return s&&p.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",D),p.disconnect()}}},[r,s,x.paused]),c.useEffect(()=>{if(s){or.add(x);const g=document.activeElement;if(!s.contains(g)){const v=new CustomEvent(hn,rr);s.addEventListener(hn,d),s.dispatchEvent(v),v.defaultPrevented||(Gi(ts(Ur(s)),{select:!0}),document.activeElement===g&&He(s))}return()=>{s.removeEventListener(hn,d),setTimeout(()=>{const v=new CustomEvent(pn,rr);s.addEventListener(pn,f),s.dispatchEvent(v),v.defaultPrevented||He(g??document.body,{select:!0}),s.removeEventListener(pn,f),or.remove(x)},0)}}},[s,d,f,x]);const S=c.useCallback(g=>{if(!n&&!r||x.paused)return;const D=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(D&&v){const p=g.currentTarget,[w,b]=Ji(p);w&&b?!g.shiftKey&&v===b?(g.preventDefault(),n&&He(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&He(b,{select:!0})):v===p&&g.preventDefault()}},[n,r,x.paused]);return i.jsx(_e.div,{tabIndex:-1,...l,ref:m,onKeyDown:S})});zr.displayName=Ki;function Gi(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(He(r,{select:t}),document.activeElement!==n)return}function Ji(e){const t=Ur(e),n=ar(t,e),r=ar(t.reverse(),e);return[n,r]}function Ur(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ar(e,t){for(const n of e)if(!Qi(n,{upTo:t}))return n}function Qi(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Zi(e){return e instanceof HTMLInputElement&&"select"in e}function He(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Zi(e)&&t&&e.select()}}var or=es();function es(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=ir(e,t),e.unshift(t)},remove(t){var n;e=ir(e,t),(n=e[0])==null||n.resume()}}}function ir(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ts(e){return e.filter(t=>t.tagName!=="A")}var ns="Portal",Wr=c.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,o]=c.useState(!1);ba(()=>o(!0),[]);const l=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return l?xa.createPortal(i.jsx(_e.div,{...r,ref:t}),l):null});Wr.displayName=ns;var tn="Dialog",[Hr,Jl]=wa(tn),[rs,Ee]=Hr(tn),Vr=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,s=c.useRef(null),u=c.useRef(null),[d,f]=Ia({prop:r,defaultProp:a??!1,onChange:o,caller:tn});return i.jsx(rs,{scope:t,triggerRef:s,contentRef:u,contentId:sn(),titleId:sn(),descriptionId:sn(),open:d,onOpenChange:f,onOpenToggle:c.useCallback(()=>f(h=>!h),[f]),modal:l,children:n})};Vr.displayName=tn;var Yr="DialogTrigger",Xr=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ee(Yr,n),o=at(t,a.triggerRef);return i.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Fn(a.open),...r,ref:o,onClick:Ye(e.onClick,a.onOpenToggle)})});Xr.displayName=Yr;var _n="DialogPortal",[as,qr]=Hr(_n,{forceMount:void 0}),Kr=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,o=Ee(_n,t);return i.jsx(as,{scope:t,forceMount:n,children:c.Children.map(r,l=>i.jsx(Tn,{present:n||o.open,children:i.jsx(Wr,{asChild:!0,container:a,children:l})}))})};Kr.displayName=_n;var Jt="DialogOverlay",Gr=c.forwardRef((e,t)=>{const n=qr(Jt,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=Ee(Jt,e.__scopeDialog);return o.modal?i.jsx(Tn,{present:r||o.open,children:i.jsx(is,{...a,ref:t})}):null});Gr.displayName=Jt;var os=pr("DialogOverlay.RemoveScroll"),is=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ee(Jt,n);return i.jsx(Pa,{as:os,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(_e.div,{"data-state":Fn(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Je="DialogContent",Jr=c.forwardRef((e,t)=>{const n=qr(Je,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=Ee(Je,e.__scopeDialog);return i.jsx(Tn,{present:r||o.open,children:o.modal?i.jsx(ss,{...a,ref:t}):i.jsx(ls,{...a,ref:t})})});Jr.displayName=Je;var ss=c.forwardRef((e,t)=>{const n=Ee(Je,e.__scopeDialog),r=c.useRef(null),a=at(t,n.contentRef,r);return c.useEffect(()=>{const o=r.current;if(o)return ka(o)},[]),i.jsx(Qr,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ye(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ye(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,s=l.button===0&&l.ctrlKey===!0;(l.button===2||s)&&o.preventDefault()}),onFocusOutside:Ye(e.onFocusOutside,o=>o.preventDefault())})}),ls=c.forwardRef((e,t)=>{const n=Ee(Je,e.__scopeDialog),r=c.useRef(!1),a=c.useRef(!1);return i.jsx(Qr,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,s;(l=e.onCloseAutoFocus)==null||l.call(e,o),o.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),o.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:o=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),Qr=c.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=e,s=Ee(Je,n),u=c.useRef(null),d=at(t,u);return La(),i.jsxs(i.Fragment,{children:[i.jsx(zr,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o,children:i.jsx(Fr,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Fn(s.open),...l,ref:d,onDismiss:()=>s.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(cs,{titleId:s.titleId}),i.jsx(ds,{contentRef:u,descriptionId:s.descriptionId})]})]})}),$n="DialogTitle",Zr=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ee($n,n);return i.jsx(_e.h2,{id:a.titleId,...r,ref:t})});Zr.displayName=$n;var ea="DialogDescription",ta=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ee(ea,n);return i.jsx(_e.p,{id:a.descriptionId,...r,ref:t})});ta.displayName=ea;var na="DialogClose",ra=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ee(na,n);return i.jsx(_e.button,{type:"button",...r,ref:t,onClick:Ye(e.onClick,()=>a.onOpenChange(!1))})});ra.displayName=na;function Fn(e){return e?"open":"closed"}var aa="DialogTitleWarning",[Ql,oa]=ya(aa,{contentName:Je,titleName:$n,docsSlug:"dialog"}),cs=({titleId:e})=>{const t=oa(aa),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return c.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},us="DialogDescriptionWarning",ds=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oa(us).contentName}}.`;return c.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},fs=Vr,hs=Xr,ps=Kr,gs=Gr,ms=Jr,vs=Zr,bs=ta,xs=ra;function ws(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const ia=y.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),It=()=>{const e=y.useContext(ia);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};ws(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function ys(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function Cs(){return Bn(/^Mac/)}function Ds(){return Bn(/^iPhone/)}function sr(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Es(){return Bn(/^iPad/)||Cs()&&navigator.maxTouchPoints>1}function sa(){return Ds()||Es()}function Bn(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Ss=24,Rs=typeof window<"u"?c.useLayoutEffect:c.useEffect;function lr(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const gn=typeof document<"u"&&window.visualViewport;function cr(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function la(e){for(cr(e)&&(e=e.parentElement);e&&!cr(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const js=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ut=0,mn;function Ts(e={}){let{isDisabled:t}=e;Rs(()=>{if(!t)return Ut++,Ut===1&&sa()&&(mn=Ns()),()=>{Ut--,Ut===0&&(mn==null||mn())}},[t])}function Ns(){let e,t=0,n=h=>{e=la(h.target),!(e===document.documentElement&&e===document.body)&&(t=h.changedTouches[0].pageY)},r=h=>{if(!e||e===document.documentElement||e===document.body){h.preventDefault();return}let m=h.changedTouches[0].pageY,x=e.scrollTop,S=e.scrollHeight-e.clientHeight;S!==0&&((x<=0&&m>t||x>=S&&m<t)&&h.preventDefault(),t=m)},a=h=>{let m=h.target;Rn(m)&&m!==document.activeElement&&(h.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},o=h=>{let m=h.target;Rn(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",gn&&(gn.height<window.innerHeight?requestAnimationFrame(()=>{ur(m)}):gn.addEventListener("resize",()=>ur(m),{once:!0}))}))},l=()=>{window.scrollTo(0,0)},s=window.pageXOffset,u=window.pageYOffset,d=lr(Os(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=lr(gt(document,"touchstart",n,{passive:!1,capture:!0}),gt(document,"touchmove",r,{passive:!1,capture:!0}),gt(document,"touchend",a,{passive:!1,capture:!0}),gt(document,"focus",o,!0),gt(window,"scroll",l));return()=>{d(),f(),window.scrollTo(s,u)}}function Os(e,t,n){let r=e.style[t];return e.style[t]=n,()=>{e.style[t]=r}}function gt(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}function ur(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=la(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let r=n.getBoundingClientRect().top,a=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const l=n.getBoundingClientRect().bottom+Ss;o>l&&(n.scrollTop+=a-r)}e=n.parentElement}}function Rn(e){return e instanceof HTMLInputElement&&!js.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function As(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Ms(...e){return t=>e.forEach(n=>As(n,t))}function ca(...e){return c.useCallback(Ms(...e),e)}const ua=new WeakMap;function Q(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let r={};Object.entries(t).forEach(([a,o])=>{if(a.startsWith("--")){e.style.setProperty(a,o);return}r[a]=e.style[a],e.style[a]=o}),!n&&ua.set(e,r)}function Is(e,t){if(!e||!(e instanceof HTMLElement))return;let n=ua.get(e);n&&(e.style[t]=n[t])}const J=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Wt(e,t){if(!e)return null;const n=window.getComputedStyle(e),r=n.transform||n.webkitTransform||n.mozTransform;let a=r.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[J(t)?13:12]):(a=r.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[J(t)?5:4]):null)}function ks(e){return 8*(Math.log(e+1)-2)}function vn(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function Ps(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const q={DURATION:.5,EASE:[.32,.72,0,1]},da=.4,Ls=.25,_s=100,fa=8,Ht=16,jn=26,bn="vaul-dragging";function ha(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function $s({defaultProp:e,onChange:t}){const n=y.useState(e),[r]=n,a=y.useRef(r),o=ha(t);return y.useEffect(()=>{a.current!==r&&(o(r),a.current=r)},[r,a,o]),n}function pa({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,a]=$s({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:r,s=ha(n),u=y.useCallback(d=>{if(o){const h=typeof d=="function"?d(e):d;h!==e&&s(h)}else a(d)},[o,e,a,s]);return[l,u]}function Fs({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:r,overlayRef:a,fadeFromIndex:o,onSnapPointChange:l,direction:s="bottom",container:u,snapToSequentialPoint:d}){const[f,h]=pa({prop:e,defaultProp:n==null?void 0:n[0],onChange:t}),[m,x]=y.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);y.useEffect(()=>{function C(){x({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const S=y.useMemo(()=>f===(n==null?void 0:n[n.length-1])||null,[n,f]),g=y.useMemo(()=>{var C;return(C=n==null?void 0:n.findIndex(E=>E===f))!=null?C:null},[n,f]),D=n&&n.length>0&&(o||o===0)&&!Number.isNaN(o)&&n[o]===f||!n,v=y.useMemo(()=>{const C=u?{width:u.getBoundingClientRect().width,height:u.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var E;return(E=n==null?void 0:n.map(j=>{const k=typeof j=="string";let I=0;if(k&&(I=parseInt(j,10)),J(s)){const R=k?I:m?j*C.height:0;return m?s==="bottom"?C.height-R:-C.height+R:R}const H=k?I:m?j*C.width:0;return m?s==="right"?C.width-H:-C.width+H:H}))!=null?E:[]},[n,m,u]),p=y.useMemo(()=>g!==null?v==null?void 0:v[g]:null,[v,g]),w=y.useCallback(C=>{var E;const j=(E=v==null?void 0:v.findIndex(k=>k===C))!=null?E:null;l(j),Q(r.current,{transition:`transform ${q.DURATION}s cubic-bezier(${q.EASE.join(",")})`,transform:J(s)?`translate3d(0, ${C}px, 0)`:`translate3d(${C}px, 0, 0)`}),v&&j!==v.length-1&&o!==void 0&&j!==o&&j<o?Q(a.current,{transition:`opacity ${q.DURATION}s cubic-bezier(${q.EASE.join(",")})`,opacity:"0"}):Q(a.current,{transition:`opacity ${q.DURATION}s cubic-bezier(${q.EASE.join(",")})`,opacity:"1"}),h(n==null?void 0:n[Math.max(j,0)])},[r.current,n,v,o,a,h]);y.useEffect(()=>{if(f||e){var C;const E=(C=n==null?void 0:n.findIndex(j=>j===e||j===f))!=null?C:-1;v&&E!==-1&&typeof v[E]=="number"&&w(v[E])}},[f,e,n,v,w]);function b({draggedDistance:C,closeDrawer:E,velocity:j,dismissible:k}){if(o===void 0)return;const I=s==="bottom"||s==="right"?(p??0)-C:(p??0)+C,H=g===o-1,R=g===0,V=C>0;if(H&&Q(a.current,{transition:`opacity ${q.DURATION}s cubic-bezier(${q.EASE.join(",")})`}),!d&&j>2&&!V){k?E():w(v[0]);return}if(!d&&j>2&&V&&v&&n){w(v[n.length-1]);return}const K=v==null?void 0:v.reduce((F,ce)=>typeof F!="number"||typeof ce!="number"?F:Math.abs(ce-I)<Math.abs(F-I)?ce:F),re=J(s)?window.innerHeight:window.innerWidth;if(j>da&&Math.abs(C)<re*.4){const F=V?1:-1;if(F>0&&S&&n){w(v[n.length-1]);return}if(R&&F<0&&k&&E(),g===null)return;w(v[g+F]);return}w(K)}function T({draggedDistance:C}){if(p===null)return;const E=s==="bottom"||s==="right"?p-C:p+C;(s==="bottom"||s==="right")&&E<v[v.length-1]||(s==="top"||s==="left")&&E>v[v.length-1]||Q(r.current,{transform:J(s)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})}function M(C,E){if(!n||typeof g!="number"||!v||o===void 0)return null;const j=g===o-1;if(g>=o&&E)return 0;if(j&&!E)return 1;if(!D&&!j)return null;const I=j?g+1:g-1,H=j?v[I]-v[I-1]:v[I+1]-v[I],R=C/Math.abs(H);return j?1-R:R}return{isLastSnapPoint:S,activeSnapPoint:f,shouldFade:D,getPercentageDragged:M,setActiveSnapPoint:h,activeSnapPointIndex:g,onRelease:b,onDrag:T,snapPointsOffset:v}}const Bs=()=>()=>{};function zs(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:r,noBodyStyles:a}=It(),o=y.useRef(null),l=c.useMemo(()=>document.body.style.backgroundColor,[]);function s(){return(window.innerWidth-jn)/window.innerWidth}y.useEffect(()=>{if(t&&n){o.current&&clearTimeout(o.current);const u=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!u)return;Ps(r&&!a?vn(document.body,{background:"black"}):Bs,vn(u,{transformOrigin:J(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${q.DURATION}s`,transitionTimingFunction:`cubic-bezier(${q.EASE.join(",")})`}));const d=vn(u,{borderRadius:`${fa}px`,overflow:"hidden",...J(e)?{transform:`scale(${s()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${s()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{d(),o.current=window.setTimeout(()=>{l?document.body.style.background=l:document.body.style.removeProperty("background")},q.DURATION*1e3)}}},[t,n,l])}let mt=null;function Us({isOpen:e,modal:t,nested:n,hasBeenOpened:r,preventScrollRestoration:a,noBodyStyles:o}){const[l,s]=y.useState(()=>typeof window<"u"?window.location.href:""),u=y.useRef(0),d=y.useCallback(()=>{if(sr()&&mt===null&&e&&!o){mt={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:h,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-u.current}px`,left:`${-h}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const x=m-window.innerHeight;x&&u.current>=m&&(document.body.style.top=`${-(u.current+x)}px`)}),300)}},[e]),f=y.useCallback(()=>{if(sr()&&mt!==null&&!o){const h=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,mt),window.requestAnimationFrame(()=>{if(a&&l!==window.location.href){s(window.location.href);return}window.scrollTo(m,h)}),mt=null}},[l]);return y.useEffect(()=>{function h(){u.current=window.scrollY}return h(),window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}},[]),y.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||f()}},[t,f]),y.useEffect(()=>{n||!r||(e?(!window.matchMedia("(display-mode: standalone)").matches&&d(),t||window.setTimeout(()=>{f()},500)):f())},[e,r,l,t,n,d,f]),{restorePositionSetting:f}}function Ws({open:e,onOpenChange:t,children:n,onDrag:r,onRelease:a,snapPoints:o,shouldScaleBackground:l=!1,setBackgroundColorOnScale:s=!0,closeThreshold:u=Ls,scrollLockTimeout:d=_s,dismissible:f=!0,handleOnly:h=!1,fadeFromIndex:m=o&&o.length-1,activeSnapPoint:x,setActiveSnapPoint:S,fixed:g,modal:D=!0,onClose:v,nested:p,noBodyStyles:w=!1,direction:b="bottom",defaultOpen:T=!1,disablePreventScroll:M=!0,snapToSequentialPoint:C=!1,preventScrollRestoration:E=!1,repositionInputs:j=!0,onAnimationEnd:k,container:I,autoFocus:H=!1}){var R,V;const[K=!1,re]=pa({defaultProp:T,prop:e,onChange:O=>{t==null||t(O),!O&&!p&&Fe(),setTimeout(()=>{k==null||k(O)},q.DURATION*1e3),O&&!D&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),O||(document.body.style.pointerEvents="auto")}}),[F,ce]=y.useState(!1),[ee,we]=y.useState(!1),[Qe,ae]=y.useState(!1),oe=y.useRef(null),ve=y.useRef(null),Te=y.useRef(null),ie=y.useRef(null),Se=y.useRef(null),ue=y.useRef(!1),he=y.useRef(null),L=y.useRef(0),be=y.useRef(!1),pe=y.useRef(!T),Ne=y.useRef(0),N=y.useRef(null),Oe=y.useRef(((R=N.current)==null?void 0:R.getBoundingClientRect().height)||0),Ae=y.useRef(((V=N.current)==null?void 0:V.getBoundingClientRect().width)||0),Ze=y.useRef(0),kt=y.useCallback(O=>{o&&O===$e.length-1&&(ve.current=new Date)},[]),{activeSnapPoint:ct,activeSnapPointIndex:se,setActiveSnapPoint:qe,onRelease:et,snapPointsOffset:$e,onDrag:Pt,shouldFade:Lt,getPercentageDragged:nn}=Fs({snapPoints:o,activeSnapPointProp:x,setActiveSnapPointProp:S,drawerRef:N,fadeFromIndex:m,overlayRef:oe,onSnapPointChange:kt,direction:b,container:I,snapToSequentialPoint:C});Ts({isDisabled:!K||ee||!D||Qe||!F||!j||!M});const{restorePositionSetting:Fe}=Us({isOpen:K,modal:D,nested:p??!1,hasBeenOpened:F,preventScrollRestoration:E,noBodyStyles:w});function ye(){return(window.innerWidth-jn)/window.innerWidth}function Ke(O){var _,B;!f&&!o||N.current&&!N.current.contains(O.target)||(Oe.current=((_=N.current)==null?void 0:_.getBoundingClientRect().height)||0,Ae.current=((B=N.current)==null?void 0:B.getBoundingClientRect().width)||0,we(!0),Te.current=new Date,sa()&&window.addEventListener("touchend",()=>ue.current=!1,{once:!0}),O.target.setPointerCapture(O.pointerId),L.current=J(b)?O.pageY:O.pageX)}function ut(O,_){var B;let A=O;const P=(B=window.getSelection())==null?void 0:B.toString(),z=N.current?Wt(N.current,b):null,Y=new Date;if(A.tagName==="SELECT"||A.hasAttribute("data-vaul-no-drag")||A.closest("[data-vaul-no-drag]"))return!1;if(b==="right"||b==="left")return!0;if(ve.current&&Y.getTime()-ve.current.getTime()<500)return!1;if(z!==null&&(b==="bottom"?z>0:z<0))return!0;if(P&&P.length>0)return!1;if(Se.current&&Y.getTime()-Se.current.getTime()<d&&z===0||_)return Se.current=Y,!1;for(;A;){if(A.scrollHeight>A.clientHeight){if(A.scrollTop!==0)return Se.current=new Date,!1;if(A.getAttribute("role")==="dialog")return!0}A=A.parentNode}return!0}function Re(O){if(N.current&&ee){const _=b==="bottom"||b==="right"?1:-1,B=(L.current-(J(b)?O.pageY:O.pageX))*_,A=B>0,P=o&&!f&&!A;if(P&&se===0)return;const z=Math.abs(B),Y=document.querySelector("[data-vaul-drawer-wrapper]"),G=b==="bottom"||b==="top"?Oe.current:Ae.current;let W=z/G;const te=nn(z,A);if(te!==null&&(W=te),P&&W>=1||!ue.current&&!ut(O.target,A))return;if(N.current.classList.add(bn),ue.current=!0,Q(N.current,{transition:"none"}),Q(oe.current,{transition:"none"}),o&&Pt({draggedDistance:B}),A&&!o){const U=ks(B),ge=Math.min(U*-1,0)*_;Q(N.current,{transform:J(b)?`translate3d(0, ${ge}px, 0)`:`translate3d(${ge}px, 0, 0)`});return}const le=1-W;if((Lt||m&&se===m-1)&&(r==null||r(O,W),Q(oe.current,{opacity:`${le}`,transition:"none"},!0)),Y&&oe.current&&l){const U=Math.min(ye()+W*(1-ye()),1),ge=8-W*8,me=Math.max(0,14-W*14);Q(Y,{borderRadius:`${ge}px`,transform:J(b)?`scale(${U}) translate3d(0, ${me}px, 0)`:`scale(${U}) translate3d(${me}px, 0, 0)`,transition:"none"},!0)}if(!o){const U=z*_;Q(N.current,{transform:J(b)?`translate3d(0, ${U}px, 0)`:`translate3d(${U}px, 0, 0)`})}}}y.useEffect(()=>{window.requestAnimationFrame(()=>{pe.current=!0})},[]),y.useEffect(()=>{var O;function _(){if(!N.current||!j)return;const B=document.activeElement;if(Rn(B)||be.current){var A;const P=((A=window.visualViewport)==null?void 0:A.height)||0,z=window.innerHeight;let Y=z-P;const G=N.current.getBoundingClientRect().height||0,W=G>z*.8;Ze.current||(Ze.current=G);const te=N.current.getBoundingClientRect().top;if(Math.abs(Ne.current-Y)>60&&(be.current=!be.current),o&&o.length>0&&$e&&se){const le=$e[se]||0;Y+=le}if(Ne.current=Y,G>P||be.current){const le=N.current.getBoundingClientRect().height;let U=le;le>P&&(U=P-(W?te:jn)),g?N.current.style.height=`${le-Math.max(Y,0)}px`:N.current.style.height=`${Math.max(U,P-te)}px`}else ys()||(N.current.style.height=`${Ze.current}px`);o&&o.length>0&&!be.current?N.current.style.bottom="0px":N.current.style.bottom=`${Math.max(Y,0)}px`}}return(O=window.visualViewport)==null||O.addEventListener("resize",_),()=>{var B;return(B=window.visualViewport)==null?void 0:B.removeEventListener("resize",_)}},[se,o,$e]);function Be(O){rn(),v==null||v(),O||re(!1),setTimeout(()=>{o&&qe(o[0])},q.DURATION*1e3)}function _t(){if(!N.current)return;const O=document.querySelector("[data-vaul-drawer-wrapper]"),_=Wt(N.current,b);Q(N.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${q.DURATION}s cubic-bezier(${q.EASE.join(",")})`}),Q(oe.current,{transition:`opacity ${q.DURATION}s cubic-bezier(${q.EASE.join(",")})`,opacity:"1"}),l&&_&&_>0&&K&&Q(O,{borderRadius:`${fa}px`,overflow:"hidden",...J(b)?{transform:`scale(${ye()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${ye()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${q.DURATION}s`,transitionTimingFunction:`cubic-bezier(${q.EASE.join(",")})`},!0)}function rn(){!ee||!N.current||(N.current.classList.remove(bn),ue.current=!1,we(!1),ie.current=new Date)}function dt(O){if(!ee||!N.current)return;N.current.classList.remove(bn),ue.current=!1,we(!1),ie.current=new Date;const _=Wt(N.current,b);if(!O||!ut(O.target,!1)||!_||Number.isNaN(_)||Te.current===null)return;const B=ie.current.getTime()-Te.current.getTime(),A=L.current-(J(b)?O.pageY:O.pageX),P=Math.abs(A)/B;if(P>.05&&(ae(!0),setTimeout(()=>{ae(!1)},200)),o){et({draggedDistance:A*(b==="bottom"||b==="right"?1:-1),closeDrawer:Be,velocity:P,dismissible:f}),a==null||a(O,!0);return}if(b==="bottom"||b==="right"?A>0:A<0){_t(),a==null||a(O,!0);return}if(P>da){Be(),a==null||a(O,!1);return}var z;const Y=Math.min((z=N.current.getBoundingClientRect().height)!=null?z:0,window.innerHeight);var G;const W=Math.min((G=N.current.getBoundingClientRect().width)!=null?G:0,window.innerWidth),te=b==="left"||b==="right";if(Math.abs(_)>=(te?W:Y)*u){Be(),a==null||a(O,!1);return}a==null||a(O,!0),_t()}y.useEffect(()=>(K&&(Q(document.documentElement,{scrollBehavior:"auto"}),ve.current=new Date),()=>{Is(document.documentElement,"scrollBehavior")}),[K]);function $t(O){const _=O?(window.innerWidth-Ht)/window.innerWidth:1,B=O?-16:0;he.current&&window.clearTimeout(he.current),Q(N.current,{transition:`transform ${q.DURATION}s cubic-bezier(${q.EASE.join(",")})`,transform:J(b)?`scale(${_}) translate3d(0, ${B}px, 0)`:`scale(${_}) translate3d(${B}px, 0, 0)`}),!O&&N.current&&(he.current=setTimeout(()=>{const A=Wt(N.current,b);Q(N.current,{transition:"none",transform:J(b)?`translate3d(0, ${A}px, 0)`:`translate3d(${A}px, 0, 0)`})},500))}function an(O,_){if(_<0)return;const B=(window.innerWidth-Ht)/window.innerWidth,A=B+_*(1-B),P=-16+_*Ht;Q(N.current,{transform:J(b)?`scale(${A}) translate3d(0, ${P}px, 0)`:`scale(${A}) translate3d(${P}px, 0, 0)`,transition:"none"})}function Ft(O,_){const B=J(b)?window.innerHeight:window.innerWidth,A=_?(B-Ht)/B:1,P=_?-16:0;_&&Q(N.current,{transition:`transform ${q.DURATION}s cubic-bezier(${q.EASE.join(",")})`,transform:J(b)?`scale(${A}) translate3d(0, ${P}px, 0)`:`scale(${A}) translate3d(${P}px, 0, 0)`})}return y.useEffect(()=>{D||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[D]),y.createElement(fs,{defaultOpen:T,onOpenChange:O=>{!f&&!O||(O?ce(!0):Be(!0),re(O))},open:K},y.createElement(ia.Provider,{value:{activeSnapPoint:ct,snapPoints:o,setActiveSnapPoint:qe,drawerRef:N,overlayRef:oe,onOpenChange:t,onPress:Ke,onRelease:dt,onDrag:Re,dismissible:f,shouldAnimate:pe,handleOnly:h,isOpen:K,isDragging:ee,shouldFade:Lt,closeDrawer:Be,onNestedDrag:an,onNestedOpenChange:$t,onNestedRelease:Ft,keyboardIsOpen:be,modal:D,snapPointsOffset:$e,activeSnapPointIndex:se,direction:b,shouldScaleBackground:l,setBackgroundColorOnScale:s,noBodyStyles:w,container:I,autoFocus:H}},n))}const ga=y.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:r,onRelease:a,shouldFade:o,isOpen:l,modal:s,shouldAnimate:u}=It(),d=ca(t,n),f=r&&r.length>0;if(!s)return null;const h=y.useCallback(m=>a(m),[a]);return y.createElement(gs,{onMouseUp:h,ref:d,"data-vaul-overlay":"","data-vaul-snap-points":l&&f?"true":"false","data-vaul-snap-points-overlay":l&&o?"true":"false","data-vaul-animate":u!=null&&u.current?"true":"false",...e})});ga.displayName="Drawer.Overlay";const ma=y.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...r},a){const{drawerRef:o,onPress:l,onRelease:s,onDrag:u,keyboardIsOpen:d,snapPointsOffset:f,activeSnapPointIndex:h,modal:m,isOpen:x,direction:S,snapPoints:g,container:D,handleOnly:v,shouldAnimate:p,autoFocus:w}=It(),[b,T]=y.useState(!1),M=ca(a,o),C=y.useRef(null),E=y.useRef(null),j=y.useRef(!1),k=g&&g.length>0;zs();const I=(R,V,K=0)=>{if(j.current)return!0;const re=Math.abs(R.y),F=Math.abs(R.x),ce=F>re,ee=["bottom","right"].includes(V)?1:-1;if(V==="left"||V==="right"){if(!(R.x*ee<0)&&F>=0&&F<=K)return ce}else if(!(R.y*ee<0)&&re>=0&&re<=K)return!ce;return j.current=!0,!0};y.useEffect(()=>{k&&window.requestAnimationFrame(()=>{T(!0)})},[]);function H(R){C.current=null,j.current=!1,s(R)}return y.createElement(ms,{"data-vaul-drawer-direction":S,"data-vaul-drawer":"","data-vaul-delayed-snap-points":b?"true":"false","data-vaul-snap-points":x&&k?"true":"false","data-vaul-custom-container":D?"true":"false","data-vaul-animate":p!=null&&p.current?"true":"false",...r,ref:M,style:f&&f.length>0?{"--snap-point-height":`${f[h??0]}px`,...t}:t,onPointerDown:R=>{v||(r.onPointerDown==null||r.onPointerDown.call(r,R),C.current={x:R.pageX,y:R.pageY},l(R))},onOpenAutoFocus:R=>{n==null||n(R),w||R.preventDefault()},onPointerDownOutside:R=>{if(e==null||e(R),!m||R.defaultPrevented){R.preventDefault();return}d.current&&(d.current=!1)},onFocusOutside:R=>{if(!m){R.preventDefault();return}},onPointerMove:R=>{if(E.current=R,v||(r.onPointerMove==null||r.onPointerMove.call(r,R),!C.current))return;const V=R.pageY-C.current.y,K=R.pageX-C.current.x,re=R.pointerType==="touch"?10:2;I({x:K,y:V},S,re)?u(R):(Math.abs(K)>re||Math.abs(V)>re)&&(C.current=null)},onPointerUp:R=>{r.onPointerUp==null||r.onPointerUp.call(r,R),C.current=null,j.current=!1,s(R)},onPointerOut:R=>{r.onPointerOut==null||r.onPointerOut.call(r,R),H(E.current)},onContextMenu:R=>{r.onContextMenu==null||r.onContextMenu.call(r,R),E.current&&H(E.current)}})});ma.displayName="Drawer.Content";const Hs=250,Vs=120,Ys=y.forwardRef(function({preventCycle:e=!1,children:t,...n},r){const{closeDrawer:a,isDragging:o,snapPoints:l,activeSnapPoint:s,setActiveSnapPoint:u,dismissible:d,handleOnly:f,isOpen:h,onPress:m,onDrag:x}=It(),S=y.useRef(null),g=y.useRef(!1);function D(){if(g.current){w();return}window.setTimeout(()=>{v()},Vs)}function v(){if(o||e||g.current){w();return}if(w(),!l||l.length===0){d||a();return}if(s===l[l.length-1]&&d){a();return}const T=l.findIndex(C=>C===s);if(T===-1)return;const M=l[T+1];u(M)}function p(){S.current=window.setTimeout(()=>{g.current=!0},Hs)}function w(){S.current&&window.clearTimeout(S.current),g.current=!1}return y.createElement("div",{onClick:D,onPointerCancel:w,onPointerDown:b=>{f&&m(b),p()},onPointerMove:b=>{f&&x(b)},ref:r,"data-vaul-drawer-visible":h?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},y.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});Ys.displayName="Drawer.Handle";function Xs(e){const t=It(),{container:n=t.container,...r}=e;return y.createElement(ps,{container:n,...r})}const Xe={Root:Ws,Content:ma,Overlay:ga,Trigger:hs,Portal:Xs,Close:xs,Title:vs,Description:bs};function qs({...e}){return i.jsx(Xe.Root,{"data-slot":"drawer",...e})}function Ks({...e}){return i.jsx(Xe.Trigger,{"data-slot":"drawer-trigger",...e})}function Gs({...e}){return i.jsx(Xe.Portal,{"data-slot":"drawer-portal",...e})}function Js({...e}){return i.jsx(Xe.Close,{"data-slot":"drawer-close",...e})}function Qs({className:e,...t}){return i.jsx(Xe.Overlay,{"data-slot":"drawer-overlay",className:ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Zs({className:e,children:t,...n}){const{appearance:r,color:a}=c.useContext(Ca),o=Da(r);return i.jsxs(Gs,{"data-slot":"drawer-portal",children:[" ",i.jsxs(Ea,{appearance:o,accentColor:a,children:[i.jsx(Qs,{}),i.jsxs(Xe.Content,{"data-slot":"drawer-content",className:ot("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",e),...n,children:[i.jsx("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),t]})," "]})]})}function el({className:e,...t}){return i.jsx("div",{"data-slot":"drawer-header",className:ot("flex flex-col gap-1.5 p-4",e),...t})}function tl({className:e,...t}){return i.jsx("div",{"data-slot":"drawer-footer",className:ot("mt-auto flex flex-col gap-2 p-4",e),...t})}function nl({className:e,...t}){return i.jsx(Xe.Title,{"data-slot":"drawer-title",className:ot("text-foreground font-semibold",e),...t})}function rl({className:e,...t}){return i.jsx(Xe.Description,{"data-slot":"drawer-description",className:ot("text-muted-foreground text-sm",e),...t})}const Zl=()=>i.jsx(Ra,{children:i.jsx(al,{})}),al=()=>{const{nodeDetail:e,isLoading:t,error:n}=St(),[r,a]=c.useState(""),[o,l]=c.useState([]),s=Array.isArray(e)?e.filter(u=>u.name.toLowerCase().includes(r.toLowerCase())).sort((u,d)=>u.weight-d.weight):[];return t?i.jsx(Sa,{text:""}):n?i.jsx("div",{children:n}):i.jsxs(X,{direction:"column",gap:"4",p:"4",children:[i.jsx(ol,{searchTerm:r,setSearchTerm:a,selectedNodes:o}),i.jsx(sl,{nodes:s,selectedNodes:o,setSelectedNodes:l})]})},ol=({searchTerm:e,setSearchTerm:t,selectedNodes:n})=>{const{t:r}=Le(),{refresh:a}=St(),[o,l]=c.useState(!1),[s,u]=c.useState(!1),d=y.useRef(null),f=async h=>{u(!0),l(!0);try{await fetch("/api/admin/client/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h||""})}),a()}catch(m){Ie.error(`${r("common.error","Error")}: ${m instanceof Error?m.message:String(m)}`)}finally{l(!1),u(!1)}};return i.jsxs(X,{justify:"between",align:"center",gap:"4",wrap:"wrap",children:[i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(vt,{size:"5",weight:"bold",children:r("admin.nodeTable.nodeList")}),n.length>0&&i.jsxs(vt,{size:"2",children:["(",n.length," selected)"]})]}),i.jsxs(X,{gap:"2",children:[i.jsx(de,{placeholder:r("admin.nodeTable.searchByName"),value:e,onChange:h=>t(h.target.value)}),i.jsxs(Rt,{open:s,onOpenChange:u,children:[i.jsx(rt,{children:i.jsxs(ke,{onClick:()=>u(!0),children:[i.jsx($a,{size:16}),r("admin.nodeTable.addNode")]})}),i.jsxs(jt,{children:[i.jsx(Tt,{children:r("admin.nodeTable.addNode")}),i.jsx(de,{ref:d,placeholder:r("admin.nodeTable.nameOptional")}),i.jsx(X,{justify:"end",gap:"2",mt:"4",children:i.jsx(ke,{onClick:()=>{var h;return f((h=d.current)==null?void 0:h.value)},disabled:o,children:r("admin.nodeTable.addNode")})})]})]})]})]})},il=({node:e,selectedNodes:t,handleSelectNode:n})=>{const{attributes:r,listeners:a,setNodeRef:o,transform:l,transition:s}=$i({id:e.uuid}),{t:u}=Le(),d=hr(),f={transform:Dt.Transform.toString(l),transition:s};function h(m){navigator.clipboard.writeText(m),Ie.success(u("copy_success"))}return i.jsxs(fr,{ref:o,style:f,className:"hover:bg-accent-a2",children:[i.jsx(We,{children:i.jsx("div",{...r,...a,className:`cursor-move p-2 rounded hover:bg-accent-a3 transition-colors ${d?"touch-manipulation select-none":""}`,style:{touchAction:"none",WebkitUserSelect:"none",userSelect:"none"},title:d?u("admin.nodeTable.dragToReorder","长按拖拽重新排序"):void 0,children:i.jsx(Qa,{size:d?18:16,color:"var(--gray-8)"})})}),i.jsx(We,{children:i.jsx(Ce,{checked:t.includes(e.uuid),onCheckedChange:m=>n(e.uuid,!!m)})}),i.jsx(We,{children:i.jsx(fl,{node:e})}),i.jsx(We,{children:i.jsxs(X,{direction:"column",children:[e.ipv4&&i.jsxs(vt,{size:"2",className:"flex items-center gap-1",children:[e.ipv4,i.jsx(Pe,{variant:"ghost",onClick:()=>h(e.ipv4),children:i.jsx(yt,{size:"16"})})]}),e.ipv6&&i.jsxs(vt,{size:"2",className:"flex items-center gap-1",title:e.ipv6,children:[e.ipv6.length>20?(()=>{const m=e.ipv6.split(":");return m.length>3?`${m.slice(0,2).join(":")}:...${m[m.length-1]}`:e.ipv6})():e.ipv6,i.jsx(Pe,{variant:"ghost",onClick:()=>h(e.ipv6),children:i.jsx(yt,{size:"16"})})]})]})}),i.jsx(We,{children:e.version}),i.jsx(We,{children:i.jsx(vt,{size:"2",title:e.remark,style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.remark&&e.remark.length>10?`${e.remark.slice(0,10)}...`:e.remark})}),i.jsx(We,{children:i.jsx(Ta,{price:e.price,billing_cycle:e.billing_cycle,expired_at:e.expired_at,currency:e.currency,tags:e.tags||""})}),i.jsx(We,{children:i.jsx(ll,{node:e})})]})},sl=({nodes:e,selectedNodes:t,setSelectedNodes:n})=>{const{t:r}=Le(),a=mo(cn(jr,{activationConstraint:{distance:10}}),cn(Tr,{activationConstraint:{delay:200,tolerance:5}}),cn(Pn,{})),[o,l]=c.useState(e),[s,u]=c.useState(!1);y.useEffect(()=>{l(e)},[e]);const d=()=>{u(!0),"vibrate"in navigator&&navigator.vibrate(50)},f=async x=>{u(!1);const{active:S,over:g}=x;if(!g||S.id===g.id)return;const D=o.findIndex(b=>b.uuid===S.id),v=o.findIndex(b=>b.uuid===g.id),p=Array.from(o),[w]=p.splice(D,1);p.splice(v,0,w),l(p),"vibrate"in navigator&&navigator.vibrate([30,10,30]);try{const b=p.reduce((T,M,C)=>(T[M.uuid]=C,T),{});await fetch("/api/admin/client/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})}catch{Ie.error("Order Failed")}},h=x=>{n(x?o.map(S=>S.uuid):[])},m=(x,S)=>{n(S?[...t,x]:t.filter(g=>g!==x))};return i.jsx("div",{className:`rounded-md overflow-hidden ${s?"select-none":""}`,children:i.jsx(bi,{sensors:a,collisionDetection:yo,onDragStart:d,onDragEnd:f,children:i.jsxs(Oa,{children:[i.jsx(Aa,{style:{backgroundColor:"var(--accent-4)"},children:i.jsxs(fr,{children:[i.jsx(Ue,{}),i.jsx(Ue,{children:i.jsx(Ce,{checked:t.length===o.length&&o.length>0,onCheckedChange:h})}),i.jsx(Ue,{children:r("admin.nodeTable.name")}),i.jsx(Ue,{children:r("admin.nodeTable.ipAddress")}),i.jsx(Ue,{children:r("admin.nodeTable.clientVersion")}),i.jsx(Ue,{children:r("admin.nodeEdit.remark")}),i.jsx(Ue,{children:r("admin.nodeTable.billing")}),i.jsx(Ue,{})]})}),i.jsx(Ma,{children:i.jsx(Ai,{items:o.map(x=>x.uuid),strategy:Ni,children:o.map(x=>i.jsx(il,{node:x,selectedNodes:t,handleSelectNode:m},x.uuid))})})]})})})},ll=({node:e})=>{const{t}=Le();return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ul,{node:e}),i.jsx(Pe,{title:t("terminal.title"),variant:"ghost",onClick:()=>{window.open(`/terminal?uuid=${e.uuid}`,"_blank")},children:i.jsx(eo,{size:"18"})}),i.jsx(dl,{node:e}),i.jsx(hl,{node:e}),i.jsx(cl,{node:e})]})};function cl({node:e}){const{t}=Le(),{refresh:n}=St(),[r,a]=y.useState(!1),[o,l]=y.useState(!1),s=async()=>{try{l(!0),await fetch(`/api/admin/client/${e.uuid}/remove`,{method:"POST"}),Ie.success(`Delete ${e.name}`),a(!1),n()}catch(u){Ie.error(`Error: ${u instanceof Error?u.message:String(u)}`)}finally{l(!1)}};return i.jsxs(Rt,{open:r,onOpenChange:a,children:[i.jsx(rt,{children:i.jsx(Pe,{variant:"ghost",color:"red",title:t("delete"),children:i.jsx(Va,{size:"18"})})}),i.jsxs(jt,{children:[i.jsx(Tt,{children:t("delete")}),i.jsx(Ua,{children:t("admin.nodeTable.confirmDelete")}),i.jsxs(X,{justify:"end",gap:"2",mt:"4",children:[i.jsx(rt,{children:i.jsx(ke,{variant:"soft",children:t("admin.nodeTable.cancel")})}),i.jsx(ke,{disabled:o,color:"red",onClick:s,children:t("admin.nodeTable.confirmDelete")})]})]})]})}function ul({node:e}){const[t,n]=y.useState("linux"),[r,a]=y.useState({disableWebSsh:!1,disableAutoUpdate:!1,ignoreUnsafeCert:!1,memoryModeAvailable:!1,ghproxy:"",dir:"",serviceName:"",includeNics:"",excludeNics:""}),[o,l]=y.useState(!1),[s,u]=y.useState(!1),[d,f]=y.useState(!1),[h,m]=y.useState(!1),[x,S]=y.useState(!1),g=()=>{const p=window.location.origin,w=e.token||"";let b=["-e",p,"-t",w];if(r.disableWebSsh&&b.push("--disable-web-ssh"),r.disableAutoUpdate&&b.push("--disable-auto-update"),r.ignoreUnsafeCert&&b.push("--ignore-unsafe-cert"),r.memoryModeAvailable&&b.push("--memory-mode-available"),o&&r.ghproxy){const M=(r.ghproxy.startsWith("http")?r.ghproxy:`http://${r.ghproxy}`).replace(/\/+$/,"");b.push("--install-ghproxy"),b.push(M)}s&&r.dir&&(b.push("--install-dir"),b.push(r.dir)),d&&r.serviceName&&(b.push("--install-service-name"),b.push(r.serviceName)),h&&r.includeNics&&(b.push("--include-nics"),b.push(r.includeNics)),x&&r.excludeNics&&(b.push("--exclude-nics"),b.push(r.excludeNics));let T="";switch(t){case"linux":T="bash <(curl -sL https://raw.githubusercontent.com/komari-monitor/komari-agent/refs/heads/main/install.sh) "+b.join(" ");break;case"windows":T=`powershell.exe -NoProfile -ExecutionPolicy Bypass -Command "iwr 'https://raw.githubusercontent.com/komari-monitor/komari-agent/refs/heads/main/install.ps1' -UseBasicParsing -OutFile 'install.ps1'; & '.\\install.ps1'`,b.forEach(M=>{T+=` '${M}'`}),T+='"';break}return T},D=async p=>{try{await navigator.clipboard.writeText(p),Ie.success(v("copy_success","已复制到剪贴板"))}catch(w){console.error("Failed to copy text: ",w)}},{t:v}=Le();return i.jsxs(Rt,{children:[i.jsx(rt,{children:i.jsx(Pe,{variant:"ghost",title:v("admin.nodeTable.installCommand"),children:i.jsx(Ga,{size:"18"})})}),i.jsxs(jt,{children:[i.jsx(Tt,{children:v("admin.nodeTable.installCommand","一键部署指令")}),i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs(Wa,{value:t,onValueChange:p=>n(p),children:[i.jsx(Un,{value:"linux",children:"Linux"}),i.jsx(Un,{value:"windows",children:"Windows"})]}),i.jsxs(X,{direction:"column",gap:"2",children:[i.jsx("label",{className:"text-base font-bold",children:v("admin.nodeTable.installOptions","安装选项")}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:r.disableWebSsh,onCheckedChange:p=>{a(w=>({...w,disableWebSsh:!!p}))}}),i.jsx("label",{className:"text-sm font-normal",onClick:()=>{a(p=>({...p,disableWebSsh:!p.disableWebSsh}))},children:v("admin.nodeTable.disableWebSsh")})]}),i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:r.disableAutoUpdate,onCheckedChange:p=>{a(w=>({...w,disableAutoUpdate:!!p}))}}),i.jsx("label",{className:"text-sm font-normal",onClick:()=>{a(p=>({...p,disableAutoUpdate:!p.disableAutoUpdate}))},children:v("admin.nodeTable.disableAutoUpdate","禁用自动更新")})]}),i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:r.ignoreUnsafeCert,onCheckedChange:p=>{a(w=>({...w,ignoreUnsafeCert:!!p}))}}),i.jsx("label",{className:"text-sm font-normal",onClick:()=>{a(p=>({...p,ignoreUnsafeCert:!p.ignoreUnsafeCert}))},children:v("admin.nodeTable.ignoreUnsafeCert","忽略不安全证书")})]}),i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:r.memoryModeAvailable,onCheckedChange:p=>{a(w=>({...w,memoryModeAvailable:!!p}))}}),i.jsx("label",{className:"text-sm font-normal",onClick:()=>{a(p=>({...p,memoryModeAvailable:!p.memoryModeAvailable}))},children:v("admin.nodeTable.memoryModeAvailable","监测可用内存")}),i.jsx(dr,{size:"14",children:v("admin.nodeTable.memoryModeAvailable_tip")})]})]}),i.jsxs(X,{direction:"column",gap:"2",children:[i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:o,onCheckedChange:p=>{l(!!p),p||a(w=>({...w,ghproxy:""}))}}),i.jsx("label",{className:"text-sm font-bold cursor-pointer",onClick:()=>{l(!o),o&&a(p=>({...p,ghproxy:""}))},children:v("admin.nodeTable.ghproxy","GitHub 代理")})]}),o&&i.jsx(de,{placeholder:"https://ghfast.top/",value:r.ghproxy,onChange:p=>a(w=>({...w,ghproxy:p.target.value}))}),i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:s,onCheckedChange:p=>{u(!!p),p||a(w=>({...w,dir:""}))}}),i.jsx("label",{className:"text-sm font-bold cursor-pointer",onClick:()=>{u(!s),s&&a(p=>({...p,dir:""}))},children:v("admin.nodeTable.install_dir","安装目录")})]}),s&&i.jsx(de,{placeholder:v("admin.nodeTable.install_dir_placeholder","安装目录，为空则使用默认目录(/opt/komari-agent)"),value:r.dir,onChange:p=>a(w=>({...w,dir:p.target.value}))}),i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:d,onCheckedChange:p=>{f(!!p),p||a(w=>({...w,serviceName:""}))}}),i.jsx("label",{className:"text-sm font-bold cursor-pointer",onClick:()=>{f(!d),d&&a(p=>({...p,serviceName:""}))},children:v("admin.nodeTable.serviceName","服务名称")})]}),d&&i.jsx(de,{placeholder:v("admin.nodeTable.serviceName_placeholder","服务名称，为空则使用默认名称(komari-agent)"),value:r.serviceName,onChange:p=>a(w=>({...w,serviceName:p.target.value}))}),i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:h,onCheckedChange:p=>{m(!!p),p||a(w=>({...w,includeNics:""}))}}),i.jsx("label",{className:"text-sm font-bold cursor-pointer",onClick:()=>{m(!h),h&&a(p=>({...p,includeNics:""}))},children:v("admin.nodeTable.includeNics","只监测特定网卡")})]}),h&&i.jsx(de,{placeholder:"eth0,eth1",value:r.includeNics,onChange:p=>a(w=>({...w,includeNics:p.target.value}))}),i.jsxs(X,{gap:"2",align:"center",children:[i.jsx(Ce,{checked:x,onCheckedChange:p=>{S(!!p),p||a(w=>({...w,excludeNics:""}))}}),i.jsx("label",{className:"text-sm font-bold cursor-pointer",onClick:()=>{S(!x),x&&a(p=>({...p,excludeNics:""}))},children:v("admin.nodeTable.excludeNics","排除特定网卡")})]}),x&&i.jsx(de,{placeholder:"lo",value:r.excludeNics,onChange:p=>a(w=>({...w,excludeNics:p.target.value}))})]})]}),i.jsxs(X,{direction:"column",gap:"2",children:[i.jsx("label",{className:"text-base font-bold",children:v("admin.nodeTable.generatedCommand","生成的指令")}),i.jsx("div",{className:"relative",children:i.jsx(xn,{disabled:!0,className:"w-full",style:{minHeight:"80px"},value:g()})})]}),i.jsx(X,{justify:"center",children:i.jsxs(ke,{style:{width:"100%"},onClick:()=>D(g()),children:[i.jsx(yt,{size:16}),v("copy")]})})]})]})]})}function dl({node:e}){const{t}=Le(),[n,r]=c.useState(!1),{refresh:a}=St(),o=y.useRef(null),l=y.useRef(null),s=y.useRef(null),u=y.useRef(null),d=y.useRef(null),[f,h]=c.useState(!1),m=async()=>{var x,S,g,D,v;try{h(!0),await fetch(`/api/admin/client/${e.uuid}/edit`,{method:"POST",body:JSON.stringify({name:(x=o.current)==null?void 0:x.value,remark:(S=d.current)==null?void 0:S.value,public_remark:(g=u.current)==null?void 0:g.value,group:(D=l.current)==null?void 0:D.value,tags:(v=s.current)==null?void 0:v.value}),headers:{"Content-Type":"application/json"}}),a(),r(!1),Ie.success(t("admin.nodeEdit.saveSuccess","保存成功"))}catch(p){console.error("Error updating client:",p)}finally{h(!1)}};return i.jsxs(Rt,{open:n,onOpenChange:r,children:[i.jsx(rt,{children:i.jsx(Pe,{variant:"ghost",title:t("admin.nodeEdit.editInfo","编辑信息"),children:i.jsx(ja,{size:"18"})})}),i.jsxs(jt,{children:[i.jsx(Tt,{children:t("admin.nodeEdit.editInfo","编辑信息")}),i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-muted-foreground",children:t("admin.nodeEdit.name","名称")}),i.jsx(de,{defaultValue:e.name,placeholder:t("admin.nodeEdit.namePlaceholder","请输入名称"),ref:o})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-muted-foreground",children:t("admin.nodeEdit.token","Token 令牌")}),i.jsx(de,{value:e.token,placeholder:t("admin.nodeEdit.tokenPlaceholder","请输入 Token"),readOnly:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"mb-1 text-sm font-medium text-muted-foreground flex items-center",children:[t("common.tags"),i.jsx("label",{className:"text-muted-foreground ml-1 text-xs self-end",children:t("common.tagsDescription")}),i.jsx(dr,{children:i.jsx("span",{dangerouslySetInnerHTML:{__html:t("common.tagsTips")}})})]}),i.jsx(de,{defaultValue:e.tags,ref:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-muted-foreground",children:t("common.group")}),i.jsx(de,{defaultValue:e.group,ref:l})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-muted-foreground",children:t("admin.nodeEdit.remark","私有备注")}),i.jsx(xn,{defaultValue:e.remark,ref:d,resize:"vertical",placeholder:t("admin.nodeEdit.remarkPlaceholder","请输入私有备注")})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-muted-foreground",children:t("admin.nodeEdit.publicRemark","公开备注")}),i.jsx(xn,{defaultValue:e.public_remark,resize:"vertical",placeholder:t("admin.nodeEdit.publicRemarkPlaceholder","请输入公开备注"),ref:u})]})]}),i.jsx(X,{gap:"2",justify:"end",className:"mt-4",children:i.jsx(ke,{type:"submit",className:"w-full",disabled:f,onClick:m,children:f?t("admin.nodeEdit.waiting","等待..."):t("save","保存")})})]})]})}function fl({node:e}){var r;const{t}=Le(),n=hr();return i.jsxs(qs,{direction:n?"bottom":"right",children:[i.jsx(Ks,{asChild:!0,children:i.jsxs("div",{className:"h-8 flex items-center hover:underline cursor-pointer font-bold text-base",children:[i.jsx(Na,{flag:e.region,size:"6"}),e.name.length>25?e.name.slice(0,25)+"...":e.name]})}),i.jsxs(Zs,{children:[i.jsxs(el,{className:"gap-1",children:[i.jsx(nl,{children:e.name}),i.jsx(rl,{children:t("admin.nodeDetail.machineDetail","机器详细信息")})]}),i.jsx("div",{className:"flex flex-col gap-4 overflow-y-auto px-4 text-sm",children:i.jsxs("form",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-ip",children:t("admin.nodeDetail.ipAddress","IP 地址")}),i.jsxs("div",{className:"flex flex-col gap-1",children:[e.ipv4&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{id:"detail-ipv4",className:"bg-muted px-3 py-2 rounded border flex-1 min-w-0 select-text",children:e.ipv4}),i.jsx(Pe,{variant:"ghost",className:"size-5",type:"button",onClick:()=>{navigator.clipboard.writeText(e.ipv4)},children:i.jsx(yt,{size:16})})]}),e.ipv6&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{id:"detail-ipv6",className:"bg-muted px-3 py-2 rounded border flex-1 min-w-0 select-text",children:e.ipv6}),i.jsx(Pe,{variant:"ghost",className:"size-5",type:"button",onClick:()=>{navigator.clipboard.writeText(e.ipv6)},children:i.jsx(yt,{size:16})})]})]})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-version",children:t("admin.nodeDetail.clientVersion","客户端版本")}),i.jsx("span",{id:"detail-version",className:"bg-muted px-3 py-2 rounded border select-text",children:e.version||i.jsx("span",{className:"text-muted-foreground",children:"-"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-os",children:t("admin.nodeDetail.os","操作系统")}),i.jsx("span",{id:"detail-os",className:"bg-muted px-3 py-2 rounded border select-text",children:e.os||i.jsx("span",{className:"text-muted-foreground",children:"-"})})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-arch",children:t("admin.nodeDetail.arch","架构")}),i.jsx("span",{id:"detail-arch",className:"bg-muted px-3 py-2 rounded border select-text",children:e.arch||i.jsx("span",{className:"text-muted-foreground",children:"-"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-cpu_name",children:t("admin.nodeDetail.cpu","CPU")}),i.jsx("span",{id:"detail-cpu_name",className:"bg-muted px-3 py-2 rounded border select-text",children:e.cpu_name||i.jsx("span",{className:"text-muted-foreground",children:"-"})})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-cpu_cores",children:t("admin.nodeDetail.cpuCores","CPU 核心数")}),i.jsx("span",{id:"detail-cpu_cores",className:"bg-muted px-3 py-2 rounded border select-text",children:((r=e.cpu_cores)==null?void 0:r.toString())||i.jsx("span",{className:"text-muted-foreground",children:"-"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-mem_total",children:t("admin.nodeDetail.memTotal","总内存 (Bytes)")}),i.jsx("span",{id:"detail-mem_total",className:"bg-muted px-3 py-2 rounded border select-text",title:e.mem_total?String(e.mem_total)+" Bytes":"-",children:zn(e.mem_total)})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-disk_total",children:t("admin.nodeDetail.diskTotal","总磁盘空间 (Bytes)")}),i.jsx("span",{id:"detail-disk_total",className:"bg-muted px-3 py-2 rounded border select-text",title:e.disk_total?String(e.disk_total)+" Bytes":"-",children:zn(e.disk_total)})]})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-gpu_name",children:t("admin.nodeDetail.gpu","GPU")}),i.jsx("span",{id:"detail-gpu_name",className:"bg-muted px-3 py-2 rounded border select-text",children:e.gpu_name||i.jsx("span",{className:"text-muted-foreground",children:"-"})})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-uuid",children:t("admin.nodeDetail.uuid","UUID")}),i.jsx("span",{id:"detail-uuid",className:"bg-muted px-3 py-2 rounded border select-text",children:e.uuid||i.jsx("span",{className:"text-muted-foreground",children:"-"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-createdAt",children:t("admin.nodeDetail.createdAt","创建时间")}),i.jsx("span",{id:"detail-createdAt",className:"bg-muted px-3 py-2 rounded border select-text",children:e.created_at?new Date(e.created_at).toLocaleString():i.jsx("span",{className:"text-muted-foreground",children:"-"})})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{htmlFor:"detail-updatedAt",children:t("admin.nodeDetail.updatedAt","更新时间")}),i.jsx("span",{id:"detail-updatedAt",className:"bg-muted px-3 py-2 rounded border select-text",children:e.updated_at?new Date(e.updated_at).toLocaleString():i.jsx("span",{className:"text-muted-foreground",children:"-"})})]})]})]})}),i.jsx(tl,{children:i.jsx(Js,{asChild:!0,children:i.jsx(ke,{children:t("admin.nodeDetail.done","完成")})})})]})]})}function hl({node:e}){const{t}=Le(),{refresh:n}=St(),[r,a]=c.useState(!1),[o,l]=c.useState(!1),[s,u]=y.useState(e.billing_cycle.toString()),[d,f]=y.useState(e.auto_renewal||!1),[h,m]=y.useState(e.currency||"$"),x=async S=>{S.preventDefault();try{l(!0);const g=new FormData(S.target),D=g.get("price")||"0",v=parseFloat(D);if(isNaN(v)||v<0&&v!==-1){Ie.error(t("admin.nodeTable.invalidPrice"));return}const p=parseInt(g.get("billingCycle")||"30"),w=g.get("expiredAt")||"",b=g.get("currency")||"$";await fetch(`/api/admin/client/${e.uuid}/edit`,{method:"POST",body:JSON.stringify({price:v,billing_cycle:p,expired_at:w,currency:b,auto_renewal:d}),headers:{"Content-Type":"application/json"}}),n(),a(!1)}catch(g){Ie.error("Failed to save billing information:"+g)}finally{l(!1)}};return i.jsxs(Rt,{open:r,onOpenChange:a,children:[i.jsx(rt,{children:i.jsx(Pe,{variant:"ghost",title:t("admin.nodeTable.billing","账单"),children:i.jsx(Xa,{size:"18"})})}),i.jsxs(jt,{children:[i.jsx(Tt,{children:t("admin.nodeTable.billing","账单")}),i.jsx("form",{onSubmit:x,children:i.jsxs(X,{direction:"column",gap:"2",children:[i.jsxs("label",{className:"font-bold",children:[i.jsx("label",{children:t("admin.nodeTable.price")}),i.jsx("label",{className:"text-muted-foreground text-sm ml-1 font-medium",children:t("admin.nodeTable.priceTips")})]}),i.jsx(de,{name:"price",defaultValue:e.price}),i.jsx("label",{className:"font-bold",children:t("admin.nodeTable.currency","货币")}),i.jsx(de,{name:"currency",defaultValue:h,onChange:S=>m(S.target.value)}),i.jsx("label",{className:"font-bold",children:t("admin.nodeTable.billingCycle")}),i.jsxs(Fa,{name:"billingCycle",value:s,onValueChange:u,children:[i.jsx(Ba,{}),i.jsxs(za,{children:[i.jsx(Ge,{value:"30",children:t("common.monthly")}),i.jsx(Ge,{value:"92",children:t("common.quarterly")}),i.jsx(Ge,{value:"184",children:t("common.semi_annual")}),i.jsx(Ge,{value:"365",children:t("common.annual")}),i.jsx(Ge,{value:"730",children:t("common.biennial")}),i.jsx(Ge,{value:"1095",children:t("common.triennial")}),i.jsx(Ge,{value:"-1",children:t("common.once")})]})]}),i.jsx(X,{gap:"2",align:"center",children:i.jsx("label",{className:"font-bold",children:t("admin.nodeTable.expiredAt")})}),i.jsx(de,{name:"expiredAt",defaultValue:e.expired_at?new Date(e.expired_at).toISOString().slice(0,10):"",type:"date",children:i.jsx(Ha,{side:"right",children:i.jsx(ke,{type:"button",variant:"ghost",onClick:()=>{const S=document.querySelector('input[name="expiredAt"]');if(S){const g=new Date;g.setFullYear(g.getFullYear()+200),S.value=g.toISOString().slice(0,10)}},children:t("admin.nodeTable.setToLongTerm","设置为长期")})})}),i.jsx(X,{gap:"2",align:"center"}),i.jsx(_a,{title:t("admin.nodeTable.autoRenewal"),description:t("admin.nodeTable.autoRenewalDescription"),defaultChecked:e.auto_renewal||!1,onChange:f}),i.jsx(ke,{type:"submit",disabled:o,children:t("save")})]})})]})]})}export{Zl as default};
