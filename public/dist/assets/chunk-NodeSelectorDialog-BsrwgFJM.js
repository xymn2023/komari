import{c as $}from"./chunk-createLucideIcon-SgBSd_zz.js";import{R as g,j as e,r as y}from"./entry-index-Cq13IMyc.js";import{u as D}from"./chunk-NodeDetailsContext-Bc0mLyEG.js";import{T as E,a as H,c as w,d as M,b as N,e as p}from"./chunk-table-BS5X1aPI.js";import{u as A}from"./chunk-useTranslation-DT6f2-nl.js";import{S as I}from"./chunk-search-CaXYtT1h.js";import{u as U,c as V}from"./chunk-text-field-BPsisRj1.js";import{c as S}from"./chunk-select-SplvZF8F.js";import{s as _,n as v,p as z,g as B,D as W}from"./chunk-dialog-ChtOFG_l.js";import{o as b}from"./chunk-button-BTrNb_zO.js";import{p as R}from"./chunk-flex-D_qeScnl.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],ne=$("trash",q),F=({className:h="",hiddenDescription:u=!1,value:c,onChange:o})=>{c=c??[];const{nodeDetail:a,isLoading:k,error:m}=D(),{t:l}=A(),[t,C]=g.useState("");if(k)return e.jsx("div",{children:"Loading..."});if(m)return e.jsx("div",{children:m});const x=[...a].sort((s,n)=>(s.weight??0)-(n.weight??0)).filter(s=>s.name.toLowerCase().includes(t.toLowerCase())),r=x.map(s=>s.uuid),f=r.length>0&&r.every(s=>c.includes(s)),i=c.length>0&&c.length<r.length,j=c.filter(s=>!a.some(n=>n.uuid===s)),d=y.useRef(null);y.useEffect(()=>{d.current&&(d.current.indeterminate=i)},[i]);const L=s=>{o(s?Array.from(new Set([...c,...r])):c.filter(n=>!r.includes(n)))},T=(s,n)=>{o(n?Array.from(new Set([...c,s])):c.filter(O=>O!==s))};return e.jsxs("div",{className:`flex flex-col ${h}`,children:[e.jsx(U,{className:"mb-2 flex items-center gap-1",placeholder:l("common.search"),value:t,onChange:s=>C(s.target.value),children:e.jsx(V,{children:e.jsx(I,{size:"16"})})}),e.jsx("div",{className:"node-selector rounded-md overflow-hidden",children:e.jsxs(E,{children:[e.jsxs(H,{children:[e.jsx(w,{children:e.jsx(S,{ref:d,checked:f,onCheckedChange:s=>L(!!s),"aria-label":"Select all"})}),e.jsx(w,{children:l("common.server")})]}),e.jsxs(M,{children:[x.map(s=>e.jsxs(N,{children:[e.jsx(p,{children:e.jsx(S,{checked:c.includes(s.uuid),onCheckedChange:n=>T(s.uuid,!!n),"aria-label":`Select ${s.name}`})}),e.jsx(p,{children:s.name})]},s.id)),j.map(s=>e.jsxs(N,{children:[e.jsx(p,{children:e.jsx(S,{checked:c.includes(s),onCheckedChange:n=>T(s,!!n),"aria-label":`Select ${s}`})}),e.jsx(p,{children:s})]},s))]})]})}),!u&&e.jsx("label",{className:"text-sm text-gray-500",children:l("common.selected",{count:c.length})})]})},re=({open:h,onOpenChange:u,value:c,onChange:o,title:a,className:k,hiddenDescription:m,children:l})=>{const{t}=A(),[C,x]=g.useState(!1),r=h!==void 0?h:C,f=u||x,[i,j]=g.useState(c??[]);g.useEffect(()=>{r&&j(c??[])},[r,c]);const d=()=>{o(i),f(!1)};return e.jsxs(_,{open:r,onOpenChange:f,children:[e.jsx(v,{children:l||e.jsx(b,{children:a||t("common.select")})}),e.jsxs(z,{style:{maxWidth:400},children:[e.jsx(B,{children:a||t("common.select")}),e.jsxs(R,{direction:"column",gap:"3",children:[e.jsx(F,{value:i,onChange:j,className:k,hiddenDescription:m}),e.jsxs(R,{justify:"end",gap:"2",children:[e.jsx(W,{children:e.jsx(b,{variant:"soft",children:t("common.cancel")})}),e.jsx(b,{onClick:d,children:t("common.done")})]})]})]})]})};export{re as N,ne as T};
