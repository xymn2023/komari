import{j as s,a as j}from"./entry-index-Cq13IMyc.js";import{u as v,a as o}from"./chunk-api-BRyb5HMf.js";import{a as g,b as _,c as r,S as y,d as S}from"./chunk-SettingCard-CsyIFvca.js";import{t as i}from"./chunk-index-CSMgxAiP.js";import{u as w,p as F}from"./chunk-useTranslation-DT6f2-nl.js";import{p as a}from"./chunk-flex-D_qeScnl.js";import{s as C,n as f,p as b,g as T,m as O,D as k}from"./chunk-dialog-ChtOFG_l.js";import{o as c}from"./chunk-button-BTrNb_zO.js";import"./chunk-react-vendor-Csw2ODfV.js";import"./chunk-text-area-76rX6ii9.js";import"./chunk-dropdown-menu-C_QY9m_V.js";import"./chunk-icons-Czmt910x.js";import"./chunk-require-react-element-DaU34sMa.js";import"./chunk-index-FhuETDEf.js";import"./chunk-index-SkULk3VY.js";import"./chunk-icon-button-8RHoNX6f.js";import"./chunk-switch-CttJqP-B.js";import"./chunk-index-CMdh1AKP.js";import"./chunk-text-field-BPsisRj1.js";import"./chunk-internal-BM6wX41l.js";import"./chunk-proxy-BKiT5fFT.js";import"./chunk-chevron-down-BtBCajUJ.js";import"./chunk-createLucideIcon-SgBSd_zz.js";import"./chunk-index-BlzzkOYo.js";function tt(){const{t}=w(),{settings:n,loading:h,error:d}=v();return h?s.jsx(j,{}):d?s.jsx(F,{color:"red",children:d}):s.jsxs(s.Fragment,{children:[s.jsx(g,{children:t("settings.site.title")}),s.jsx(_,{title:t("settings.site.name"),description:t("settings.site.name_description"),defaultValue:n.sitename||"",OnSave:async e=>{await o({sitename:e},t)}}),s.jsx(r,{title:t("settings.site.description"),description:t("settings.site.description_description"),defaultValue:n.description||"",OnSave:async e=>{await o({description:e},t)}}),s.jsx(y,{title:t("settings.site.cros"),description:t("settings.site.cros_description"),defaultChecked:n.allow_cors,onChange:async e=>{await o({allow_cors:e},t)}}),s.jsx(g,{children:t("settings.site.custom")}),s.jsx("label",{className:"text-sm text-muted-foreground -mt-4",children:t("settings.custom.note","个性化内容在使用自定义主题时可能会被覆盖。请确保代码的安全性，避免使用不受信任的内容。")}),s.jsx(r,{title:t("settings.custom.header"),description:t("settings.custom.header_description"),defaultValue:n.custom_head||"",OnSave:async e=>{await o({custom_head:e},t)}}),s.jsx(r,{title:t("settings.custom.body","自定义 Body"),description:t("settings.custom.body_description","在页面底部添加自定义内容"),defaultValue:n.custom_body||"",OnSave:async e=>{await o({custom_body:e},t)}}),s.jsx(S,{title:t("settings.custom.favicon","自定义 Favicon"),description:t("settings.custom.favicon_description","在浏览器标签页显示的图标"),defaultOpen:!0,children:s.jsxs(a,{width:"100%",justify:"between",align:"start",direction:"column",gap:"2",children:[s.jsxs(a,{gap:"2",align:"center",children:[t("settings.custom.favicon_current","当前 Favicon"),s.jsx("img",{src:"/favicon.ico",alt:"Favicon",style:{width:32,height:32}})]}),s.jsx("label",{className:"text-sm text-muted-foreground",children:t("settings.custom.favicon_note","Favicon 图标的更新速度可能较慢，通常需要清除浏览器缓存后才能看到更改。")}),s.jsxs(a,{gap:"2",align:"center",children:[s.jsxs(C,{children:[s.jsx(f,{children:s.jsx(c,{color:"tomato",children:t("settings.custom.favicon_default","恢复默认")})}),s.jsxs(b,{children:[s.jsx(T,{children:t("settings.custom.favicon_default","恢复默认")}),s.jsx(O,{children:t("settings.custom.favicon_default_description","这将恢复默认的 Favicon 图标，是否继续？")}),s.jsxs(a,{gap:"2",justify:"end",children:[s.jsx(k,{children:s.jsx(c,{variant:"soft",children:t("common.cancel","取消")})}),s.jsx(f,{children:s.jsx(c,{color:"red",onClick:async()=>{fetch("/api/admin/update/favicon",{method:"POST"}).then(e=>e.json()).then(e=>{e.status==="success"?i.success(t("settings.custom.favicon_default_success","已恢复默认 Favicon")):i.error(e.message||"恢复默认 Favicon 失败")}).catch(e=>{i.error(""+e)})},children:t("settings.custom.favicon_confirm","确认")})})]})]})]}),s.jsx(c,{onClick:async()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=async x=>{var l;const m=(l=x.target.files)==null?void 0:l[0];if(m)try{const p=await(await fetch("/api/admin/update/favicon",{method:"PUT",body:m,headers:{"Content-Type":"application/octet-stream"}})).json();p.status==="success"?i.success(t("settings.custom.favicon_update_success","已更新 Favicon")):i.error(p.message||"Failed to update Favicon")}catch(u){i.error(""+u)}},e.click()},children:t("settings.custom.favicon_change","更新 Favicon")})]})]})})]})}export{tt as default};
